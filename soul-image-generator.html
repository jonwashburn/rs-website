<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fresh Soul Image Generator - Recognition Science</title>
    <link rel="stylesheet" href="/style.css">
    <style>
        body {
            background: #f5f5f7;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2em;
        }
        
        h1 {
            font-family: 'VT323', monospace;
            font-size: 2.5em;
            margin-bottom: 1em;
        }
        
        #generateBtn {
            background: #007AFF;
            color: white;
            border: none;
            padding: 1em 2em;
            font-size: 1.2em;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 2em;
            transition: all 0.2s ease;
        }
        
        #generateBtn:hover {
            background: #0056CC;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 122, 255, 0.3);
        }
        
        #soulCanvas {
            border: 2px solid #000;
            border-radius: 8px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
            background: #fff;
        }
        
        #downloadLink {
            margin-top: 1em;
            color: #007AFF;
            text-decoration: none;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <h1>ðŸŒŸ Fresh Soul Image Generator</h1>
    <button id="generateBtn">Generate New Soul Image</button>
    <canvas id="soulCanvas" width="1024" height="1024"></canvas>
    <a id="downloadLink" href="#" download="soul-image.png">Download Image</a>
    
    <script>
        // Direct Mapan Sketchbook B replication approach
        const CANVAS_SIZE = 1024;
        
        // Mapan-style color palettes (based on observed works)
        const MAPAN_PALETTES = [
            {
                background: '#D32F2F', // Deep red like in his example
                stripes: ['#1976D2', '#FF9800', '#FFC107', '#2196F3'], // Blue, orange, yellow, blue variants
                accent: '#000000' // Black accents
            },
            {
                background: '#1976D2', // Blue
                stripes: ['#D32F2F', '#FF5722', '#FFC107', '#E91E63'], // Red, orange, yellow, pink
                accent: '#000000'
            },
            {
                background: '#4A148C', // Deep purple
                stripes: ['#FF6F00', '#00C853', '#2196F3', '#E91E63'], // Orange, green, blue, pink
                accent: '#000000'
            }
        ];
        
        // Simple random seeded function (Mapan uses controlled randomness)
        function seededRandom(seed) {
            const x = Math.sin(seed) * 10000;
            return x - Math.floor(x);
        }
        
        // Canvas texture (like Mapan's subtle paper texture)
        function addCanvasTexture(ctx, intensity = 0.02) {
            const imageData = ctx.getImageData(0, 0, CANVAS_SIZE, CANVAS_SIZE);
            const data = imageData.data;
            
            for (let i = 0; i < data.length; i += 4) {
                const noise = (Math.random() - 0.5) * intensity * 255;
                data[i] = Math.max(0, Math.min(255, data[i] + noise));     // R
                data[i + 1] = Math.max(0, Math.min(255, data[i + 1] + noise)); // G
                data[i + 2] = Math.max(0, Math.min(255, data[i + 2] + noise)); // B
            }
            
            ctx.putImageData(imageData, 0, 0);
        }
        
        // Draw diagonal stripe (core Mapan technique)
        function drawDiagonalStripe(ctx, x, y, width, height, color, angle) {
            ctx.save();
            ctx.translate(x + width/2, y + height/2);
            ctx.rotate(angle);
            ctx.fillStyle = color;
            ctx.fillRect(-width/2, -height/2, width, height);
            ctx.restore();
        }
        
        // Draw arrow shape (Mapan signature element)
        function drawArrow(ctx, x, y, size, color, angle) {
            ctx.save();
            ctx.translate(x, y);
            ctx.rotate(angle);
            ctx.fillStyle = color;
            
            // Arrow body
            ctx.fillRect(-size/2, -size/6, size, size/3);
            
            // Arrow head
            ctx.beginPath();
            ctx.moveTo(size/2, 0);
            ctx.lineTo(size/3, -size/4);
            ctx.lineTo(size/3, size/4);
            ctx.closePath();
            ctx.fill();
            
            ctx.restore();
        }
        
        // Main Mapan-style generation
        function generateSoulImage() {
            const canvas = document.getElementById('soulCanvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, CANVAS_SIZE, CANVAS_SIZE);
            
            // Random seed for consistent generation
            const seed = Math.random() * 1000;
            
            // Select palette
            const palette = MAPAN_PALETTES[Math.floor(seededRandom(seed) * MAPAN_PALETTES.length)];
            
            // 1. SOLID BACKGROUND (Mapan always starts with solid color)
            ctx.fillStyle = palette.background;
            ctx.fillRect(0, 0, CANVAS_SIZE, CANVAS_SIZE);
            
            // 2. GEOMETRIC COMPOSITION AREA (Mapan puts elements in specific zones)
            const compX = CANVAS_SIZE * (0.3 + seededRandom(seed + 1) * 0.4); // 30-70% across
            const compY = CANVAS_SIZE * (0.2 + seededRandom(seed + 2) * 0.6); // 20-80% down
            const compWidth = CANVAS_SIZE * (0.3 + seededRandom(seed + 3) * 0.4); // 30-70% width
            const compHeight = CANVAS_SIZE * (0.3 + seededRandom(seed + 4) * 0.4); // 30-70% height
            
            // 3. DIAGONAL STRIPE SYSTEM (core Mapan technique)
            const stripeCount = 4 + Math.floor(seededRandom(seed + 5) * 4); // 4-7 stripes
            const baseAngle = seededRandom(seed + 6) * Math.PI * 2; // Random base angle
            
            for (let i = 0; i < stripeCount; i++) {
                const stripeColor = palette.stripes[i % palette.stripes.length];
                const stripeWidth = compWidth * (0.1 + seededRandom(seed + 10 + i) * 0.15); // 10-25% of comp width
                const stripeHeight = compHeight + CANVAS_SIZE * 0.2; // Extend beyond comp area
                
                // Position stripes with consistent spacing
                const stripeX = compX + (i - stripeCount/2) * (compWidth / stripeCount) * 1.2;
                const stripeY = compY - CANVAS_SIZE * 0.1;
                
                drawDiagonalStripe(ctx, stripeX, stripeY, stripeWidth, stripeHeight, stripeColor, baseAngle);
            }
            
            // 4. DIRECTIONAL ARROW ELEMENTS (Mapan signature)
            const arrowCount = 1 + Math.floor(seededRandom(seed + 20) * 2); // 1-2 arrows
            
            for (let i = 0; i < arrowCount; i++) {
                const arrowX = compX + seededRandom(seed + 30 + i) * compWidth;
                const arrowY = compY + seededRandom(seed + 40 + i) * compHeight;
                const arrowSize = CANVAS_SIZE * (0.05 + seededRandom(seed + 50 + i) * 0.1); // 5-15% of canvas
                const arrowAngle = baseAngle + seededRandom(seed + 60 + i) * Math.PI/4; // Slight variation from stripe angle
                
                drawArrow(ctx, arrowX, arrowY, arrowSize, palette.accent, arrowAngle);
            }
            
            // 5. SUBTLE CANVAS TEXTURE (Mapan's finishing touch)
            addCanvasTexture(ctx, 0.01);
            
            // Update download
            document.getElementById('downloadLink').href = canvas.toDataURL('image/png');
        }
        
        // Event listener
        document.getElementById('generateBtn').addEventListener('click', generateSoulImage);
        
        // Initial generation
        generateSoulImage();
    </script>
</body>
</html> 