<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Recognition Physics | The Inevitable Framework of Reality ✓</title>
  <link rel="stylesheet" href="/assets/css/main.css" />
  <link rel="stylesheet" href="/assets/css/site-template.css">
  <style>
    /* Neo-brutalist Constants Section */
    .brutal-constants-section,
    .brutal-theorems-section {
      margin: 3rem 0;
      padding: 0 1rem;
    }
    
    .brutal-constants-section h2,
    .brutal-theorems-section h2 {
      font-size: 1.5rem;
      font-weight: 400;
      margin-bottom: 2rem;
      text-transform: uppercase;
      letter-spacing: 2px;
      border-bottom: 2px solid #000;
      padding-bottom: 0.5rem;
    }
    
    .constants-list {
      max-width: 800px;
    }
    
    .constant-entry {
      margin-bottom: 2rem;
      padding-left: 2rem;
      border-left: 3px solid #ff006e;
    }
    
    .constant-symbol {
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
    }
    
    .constant-def {
      font-size: 0.875rem;
      color: #666;
      margin-bottom: 0.5rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .constant-val {
      font-family: monospace;
      font-size: 1rem;
      background: #f5f5f5;
      padding: 0.25rem 0.5rem;
      display: inline-block;
      margin-bottom: 0.5rem;
      border: 1px solid #ddd;
    }
    
    .constant-desc {
      font-size: 0.95rem;
      line-height: 1.6;
      color: #333;
    }
    
    .constants-footer,
    .theorems-footer {
      margin-top: 2rem;
      padding-top: 1rem;
      border-top: 1px solid #ddd;
      font-size: 0.875rem;
    }
    
    .constants-footer a,
    .theorems-footer a {
      color: #000;
      text-decoration: underline;
      margin-right: 1rem;
    }
    
    .constants-footer a:hover,
    .theorems-footer a:hover {
      background: #ff006e;
      color: #fff;
      text-decoration: none;
    }
    
    /* Planck/bridge note */
    .planck-note {
      margin-top: 0.5rem;
      color: #555;
      font-size: 0.85rem;
      max-width: 800px;
    }
    
    /* Theorems list */
    .theorems-list {
      counter-reset: theorem;
      max-width: 800px;
    }
    
    .theorem-entry {
      counter-increment: theorem;
      margin-bottom: 1.5rem;
      padding-left: 3rem;
      position: relative;
    }
    
    .theorem-entry::before {
      content: counter(theorem);
      position: absolute;
      left: 0;
      top: 0;
      width: 2rem;
      height: 2rem;
      background: #000;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
    }
    
    .theorem-title {
      font-size: 1.125rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
    }
    
    .theorem-statement {
      font-size: 0.95rem;
      line-height: 1.5;
      color: #333;
    }
    
    @media (max-width: 768px) {
      .brutal-constants-section h2,
      .brutal-theorems-section h2 {
        font-size: 1.25rem;
      }
      
      .constant-entry {
        padding-left: 1rem;
      }
      
      .theorem-entry {
        padding-left: 2.5rem;
      }
    }
  </style>
</head>
<body class="template-page">
  <div id="header-placeholder"></div>

  <!-- Podcast Badge -->
  <button class="podcast-badge" id="podcastBadge" aria-pressed="false" aria-label="Play 6‑minute logical foundations audio">
    <svg class="podcast-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polygon id="iconPlay" points="8,5 19,12 8,19 8,5"></polygon>
      <g id="iconPause" style="display:none"><line x1="9" y1="5" x2="9" y2="19"></line><line x1="15" y1="5" x2="15" y2="19"></line></g>
    </svg>
    <span class="podcast-label">Listen • 6 min</span>
  </button>

  <!-- Hero -->
  <section class="template-hero template-hero-framed">
    <div class="template-hero-content">
      <h1 class="template-hero-title">
        The universe has an <a href="/academic.html" style="color: inherit; text-decoration: none;"><span class="template-accent-text">operating blueprint</span></a>.
      </h1>
      <div class="template-hero-lead">

        <p>Recognition Physics is a parameter‑free, meter‑native framework. From a small set of fixed equations and constants, it <em>derives</em> the numbers we measure—without tunable knobs. The structure is over‑constrained and falsifiable: if any mapped equality fails, the framework does too.</p>
        <p>The mathematics is straightforward and checkable by any physicist. What is posted here already reproduces the core results; we are expanding details continuously.</p>
      </div>
    </div>
  </section>



  <!-- Core Constants and Theorems Section -->
  <section class="template-section theory-overview">
    <div class="template-container">

      <!-- Core Constants Section -->
      <div class="brutal-constants-section">
        <h2>Recognition Constants</h2>
        
        <div class="constants-list">
          <div class="constant-entry">
            <div class="constant-symbol">E_coh</div>
            <div class="constant-def">Coherence Energy</div>
            <div class="constant-val">φ^-5 ≈ 0.090169943 eV</div>
            <div class="constant-desc">The minimal energy quantum for recognition. Every particle mass is E_coh × φ^(integer + correction). Emerges from 5 degrees of freedom: 3 spatial + 1 temporal + 1 dual-balance.</div>
                </div>
                
          <details class="constant-entry">
            <summary>
              <div class="constant-symbol">τ_rec</div>
              <div class="constant-def">RECOGNITION TIME</div>
              <div class="constant-val">7.33 × 10^-15 s</div>
            </summary>
            <div class="constant-desc">The fundamental tick of reality. No process occurs faster. Time emerges from sequential ledger posting: τ_rec = 2π/(8 ln φ).</div>
          </details>
                
          <details class="constant-entry">
            <summary>
              <div class="constant-symbol">λ_rec</div>
              <div class="constant-def">RECOGNITION LENGTH</div>
              <div class="constant-val">√(ħG/c³) ≈ 1.616 × 10^-35 m</div>
            </summary>
            <div class="constant-desc">Reality's pixel size. The scale where information cost balances gravitational curvature. The single bridge from dimensionless math to SI units.</div>
          </details>
                
          <div class="constant-entry">
            <div class="constant-symbol">A_L</div>
            <div class="constant-def">Ledger Alphabet</div>
            <div class="constant-val">{-4, -3, -2, -1, 0, 1, 2, 3, 4}</div>
            <div class="constant-desc">Nine allowed cost states. Range ±4 forced by: entropy minimization, dynamical stability, Planck density cutoff.</div>
                </div>
                
          <div class="constant-entry">
            <div class="constant-symbol">B_i</div>
            <div class="constant-def">Sector Factors</div>
            <div class="constant-val">B_e=1, B_q=3, B_W=12</div>
            <div class="constant-desc">Channel multiplicities. Counts independent ledger paths: leptons (1), quarks (3), gauge bosons (12).</div>
                </div>
                
          <div class="constant-entry">
            <div class="constant-symbol">δ_gap</div>
            <div class="constant-def">Ledger Gap</div>
            <div class="constant-val">ln φ = 0.481211825...</div>
            <div class="constant-desc">Universal correction from undecidability. Appears in fine structure, masses, cosmology, DNA. The "price of consciousness."</div>
                </div>
              </div>
        
        <div class="constants-footer">
          <a href="/constants/">ALL CONSTANTS</a>
          <a href="/formulas/">FORMULAS</a>
          <a href="/chain.html">FORMAL PROOFS</a>
          <p class="planck-note">
            Planck anchors for our SI correspondence: 
            <span style="font-family: monospace;">λ_rec = √(ħG/c³)</span> and 
            <span style="font-family: monospace;">τ_rec = λ_rec/c</span>. 
            How RS maps dimensionless proofs to SI units is detailed in 
            <a href="/core-theory.html">Bridge to Classical</a> and the 
            <a href="/reality-bridge.html">Reality Bridge Axiom</a>.
          </p>
            </div>
          </div>

      <!-- Eight Theorems Section -->
      <div class="brutal-theorems-section">
        <h2>Eight Theorems → Classical Physics</h2>
        
        <div class="theorems-list">
          <div class="theorem-entry">
            <div class="theorem-title">Universal Ledger</div>
            <div class="theorem-statement">Every recognition structure admits a unique positive, double-entry ledger. Conservation laws emerge.</div>
        </div>
          
          <div class="theorem-entry">
            <div class="theorem-title">Golden-Ratio Scaling</div>
            <div class="theorem-statement">Cost minimization uniquely selects k=1, yielding φ as the universal scaling constant.</div>
      </div>

          <div class="theorem-entry">
            <div class="theorem-title">3+1 Spacetime</div>
            <div class="theorem-statement">Stable non-trivial linking requires exactly three spatial dimensions; causality adds one temporal.</div>
          </div>
          
          <div class="theorem-entry">
            <div class="theorem-title">Eight-Beat Cycle</div>
            <div class="theorem-statement">Complete recognition of a 3D voxel (8 vertices) requires exactly 8 ticks. Minimal Hamiltonian cycle.</div>
        </div>
          
          <div class="theorem-entry">
            <div class="theorem-title">Light as Recognition</div>
            <div class="theorem-statement">Maximum information transfer rate between voxels defines universal speed c = λ_rec/τ_rec.</div>
              </div>
          
          <div class="theorem-entry">
            <div class="theorem-title">φ-Scaled Mass</div>
            <div class="theorem-statement">All particle masses follow m = B·E_coh·φ^(r+f) with integer rungs r and calculable residues f.</div>
              </div>
          
          
          
          <div class="theorem-entry">
            <div class="theorem-title">Ledger Curvature</div>
            <div class="theorem-statement">Spacetime curvature emerges as the cost functional κ = ∂²S/∂R² on the ledger entropy.</div>
              </div>
              </div>
        
        <div class="theorems-footer">
          <a href="/chain.html">FORMAL LEAN PROOFS</a>
          <a href="/theorems/">DETAILED THEOREMS</a>
          <a href="/academic.html">TECHNICAL OVERVIEW</a>
        </div>
      </div>

      <!-- What It Predicts - HIDDEN -->
      <!-- <div class="theory-section">
        <div class="theory-header predictions">
          <h3>Complete Reality Framework</h3>
          <div class="prediction-list-inline">
            <span class="term" data-key="F1" data-def="J(x) = ½(x + 1/x) (dual‑balance symmetric cost).">J(x)</span>
            <span class="term" data-key="F2" data-def="m = B · E_coh · φ^(r + f) (universal mass ladder).">Mass Spectrum</span>
            <span class="term" data-key="F3" data-def="N_ticks = 2^{D_spatial} (minimal complete recognition cycle).">Temporal Cycle</span>
            <span class="term" data-key="F4" data-def="F(r) = - GMm / r^2 · w(r) (information‑limited gravity kernel).">Emergent Gravity (ILG)</span>
            <span class="term" data-key="F5" data-def="κ = ∂²S/∂R² (ledger curvature as regulator).">Ledger Curvature</span>
          </div>
          <button class="theory-expand-btn" aria-expanded="false">
            <span>Expand</span>
            <svg class="expand-icon" width="12" height="12" viewBox="0 0 12 12">
              <path d="M2 4L6 8L10 4" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
          </button>
        </div>
        <div class="theory-expansion" aria-hidden="true">
          <div class="expansion-body">
            <div class="formula-details">
              <div class="formula-item">
                <h4>J(x) - Cost Functional</h4>
                <p><strong>Formula:</strong> J(x) = ½(x + 1/x)</p>
                <p>The universe's unique cost function for any imbalance. Symmetric under x ↔ 1/x (dual-balance), minimized at x=1 (perfect balance). Drives all optimization in physics—from least action to thermodynamic equilibrium.</p>
              </div>
              <div class="formula-item">
                <h4>Mass Spectrum</h4>
                <p><strong>Formula:</strong> m = B · E_coh · φ^(r+f)</p>
                <p>Universal mass ladder predicting all fundamental particles. B (sector factor), r (integer rung), f (fractional residue) are uniquely determined by gauge charges. No free parameters—matches all PDG masses to ≤0.03%.</p>
              </div>
              <div class="formula-item">
                <h4>Temporal Cycle</h4>
                <p><strong>Formula:</strong> N_ticks = 2^D_spatial = 8</p>
                <p>Minimal complete recognition of 3D space requires exactly 8 ticks. Links spatial geometry to temporal rhythm—the universe's heartbeat is determined by its dimensionality.</p>
              </div>
              <div class="formula-item">
                <h4>Emergent Gravity (ILG)</h4>
                <p><strong>Formula:</strong> F(r) = -GMm/r² · w(r)</p>
                <p>Information-limited gravity—recognition bandwidth limits modify Newton's law. The weight w(r) explains galaxy rotation curves and dark matter phenomena without exotic particles.</p>
              </div>
              <div class="formula-item">
                <h4>Ledger Curvature</h4>
                <p><strong>Formula:</strong> κ = ∂²S/∂R²</p>
                <p>Spacetime curvature emerges from the cost of ledger entropy gradients. Connects information theory to geometry—Einstein's equations become accounting identities.</p>
              </div>
            </div>
            <p class="tight" style="margin-top: 1.5rem;"><a href="/predictions.html">43+ verified predictions</a> • <a href="/formulas/">All formulas</a> • <a href="/gravity.html">ILG details</a></p>
            <div class="need-more">
              <span>Need more clarity?</span>
              <a href="#" class="deeper-toggle">See deeper explanation →</a>
              <div class="deeper-content">
                <p><strong>Over-constraint principle:</strong> The same gap function δ_gap = ln φ that corrects α also fixes muon g-2, DNA pitch, and cosmological parameters. One function, multiple domains—impossible to tune.</p>
                <p><strong>Falsifiability:</strong> Change any formula and the rest breaks. This rigidity means one wrong prediction invalidates everything—but after 43 successful tests, we're measuring reality's source code.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section> -->

  <!-- What It Is -->
  <section class="template-section">
    <div class="template-container">
      <h2 class="template-section-title">What it is</h2>
      <div class="template-reading">
        <p class="lead-paragraph">
          Recognition Physics is the framework of reality itself—built from acts of distinction where systems register differences. Every act carries unavoidable cost; that cost gives time its arrow and enforces two‑sided balance (every push has a pull, every mark a counter‑mark). Apply this rule universally and the familiar world doesn't just appear—it becomes inevitable: the <a href="/encyclopedia/light.html">speed of light</a>, the <a href="/constants/fundamental-tick.html">minimal tick of time</a>, <a href="/theorems/3-1-spacetime.html">three spatial dimensions</a>, and stable patterns we call particles and fields. Quantum rules are the statistics of overlapping recognition paths. Gravity is the geometry induced when large collections of distinctions shape the stage they traverse. The <a href="/constants/">fundamental constants</a> aren't assumed—they're derived.
        </p>
      </div>
    </div>
  </section>

  <!-- Why It Matters -->
  <section class="template-section">
    <div class="template-container">
      <h2 class="template-section-title">Why it matters</h2>
      <div class="template-reading template-reading-warm">
        <p>
          This framework proves why the universe must have these exact <a href="/constants/">numbers</a>, this <a href="/encyclopedia/light.html">speed limit</a>, these <a href="/theorems/3-1-spacetime.html">dimensions</a>. It treats recognition—not human minds, but the bare capacity to draw distinctions—as fundamental. Matter is what stable recognitions look like from the outside; <a href="/encyclopedia/consciousness.html">experience</a> is what some recognitions are like from the inside. Reality is a self‑running computation whose atoms are acts of noticing. See the <a href="/logical-foundations.html">logical foundations</a> and <a href="/formulas/">operating formulas</a>.
        </p>
      </div>
    </div>
  </section>
      
  <!-- How It Changes Everything -->
  <section class="template-section">
    <div class="template-container">
      <h2 class="template-section-title">How it changes everything</h2>
      <div class="template-reading">
        <p>
          Physics becomes a calculus of balanced change rather than a catalog of particles. <a href="/constants/">Constants become theorems</a>. <a href="/measurement.html">Measurement</a> is primitive—not an add‑on—because observation is the basic move. The same <a href="/ledger.html">balancing rules</a> build electrons and experiences, unifying mind and matter as one grammar spoken in two dialects. Explore the <a href="/encyclopedia/">encyclopedia</a> for deeper dives.
        </p>
      </div>
    </div>
  </section>



  <!-- The Story -->
  <section class="template-section">
    <div class="template-container">
      <h2 class="template-section-title">The story: clear pictures, no equations</h2>
      
      <div class="story-grid">
        <div class="story-item">
          <h3>The universe must do something</h3>
          <p>
            Absolute nothing cannot even assert "I am nothing" without ceasing to be nothing. Reality therefore contains process—differences that make a difference: the tiniest noticings.
        </p>
      </div>
      
        <div class="story-item">
          <h3>Every noticing has a price and a partner</h3>
          <p>
            A lone unbalanced mark would explode the ledger with unpayable debt. Every change comes with a counter‑change; every move can, in principle, be undone. Conservation laws and path‑economy follow. Time's arrow is net cost grinding forward.
          </p>
        </div>
        
        <div class="story-item">
          <h3>Why three dimensions and a universal tick?</h3>
          <p>
            Nontrivial knots in the weave of noticings require three spatial directions; fewer cannot support them and more make untangling too easy. Walking the smallest 3‑D voxel visits its eight corners in an eight‑beat cycle—the universe's minimal heartbeat. One tick is the minimum time to hand a difference from place to place, so a maximum speed is inevitable.
          </p>
        </div>
        
        <div class="story-item">
          <h3>Light, matter, and the quantum rules</h3>
          <p>
            A photon is a pure relay of difference—change that always pays its cost forward. Massive particles are loops that keep part of the cost on hold, yielding inertia. Quantum probabilities arise by summing alternative recognition paths; the squared‑amplitude rule is the unique consistent map from overlapping stories to chances.
          </p>
      </div>
      
        <div class="story-item">
          <h3>Gravity as information housekeeping</h3>
          <p>
            Where recognitions cluster densely, routing differences becomes expensive and the background rules deform. Space bends not because matter sits on space but because traffic reshapes the network. Gravity is the geometry of the universe's bookkeeping for change.
          </p>
      </div>
      </div>
    </div>
  </section>

  <!-- What Would Count as Success -->
  <section class="template-section">
    <div class="template-container">
      <h2 class="template-section-title">What would count as success?</h2>
      <div class="template-reading">
        <p>
          Numbers decide. This framework derives specific dimensionless quantities (the <a href="/constants/">fine‑structure constant</a>), proves why exactly <a href="/theorems/3-1-spacetime.html">three large spatial dimensions</a> appear, predicts <a href="/predictions.html">cosmological fractions</a>, and resolves several tensions—without adjustable knobs. Procedures are <a href="/proofs.html">published</a>; results check against independent data. The <a href="/papers/">manuscripts</a> detail derivations of constants, <a href="/particle-masses.html">particle masses</a>, and <a href="/multiverse.html">large‑scale structure</a>, together with concrete tests for current and near‑future experiments. Our latest work shows how <a href="/dark-matter-galaxy-rotation-paper.html">galaxy rotation curves emerge from information bandwidth limits</a>—no dark matter needed.
        </p>
          </div>
    </div>
  </section>

  <!-- Isn't This Just Idealism -->
  <section class="template-section">
    <div class="template-container">
      <h2 class="template-section-title">Isn't this just idealism or "the simulation idea"?</h2>
      <div class="clarification-grid">
        <div class="clarification-item">
          <strong>Not idealism</strong>
          <p>Matter reduces to the most stable patterns within the balancing game. The rock is real because its pattern of distinctions is robust against being nudged.</p>
            </div>
        <div class="clarification-item">
          <strong>Not a programmed simulation</strong>
          <p>There is no outside server. The computation is what reality is, not what it runs on.</p>
          </div>
        <div class="clarification-item">
          <strong>Not panpsychism</strong>
          <p>Recognition is the minimal capacity to register a difference, not a claim that atoms have opinions. Complex minds are large, richly recursive recognizers built from the same rules.</p>
              </div>
              </div>
              </div>
  </section>

  <!-- How Your Picture of Science Shifts -->
  <section class="template-section">
    <div class="template-container">
      <h2 class="template-section-title">How your picture of science shifts</h2>
      <div class="shifts-grid">
        <div class="shift-item">
          <div class="shift-from">From parameters</div>
          <div class="shift-arrow">→</div>
          <div class="shift-to">To principles</div>
          <p><a href="/constants/">Prove constants</a> from necessity; if a number cannot be deduced, it is not fundamental.</p>
              </div>
        <div class="shift-item">
          <div class="shift-from">From observers as special</div>
          <div class="shift-arrow">→</div>
          <div class="shift-to">To observation as basic</div>
          <p><a href="/measurement.html">Measurement</a> is the first move—drawing a boundary, paying the cost.</p>
              </div>
        <div class="shift-item">
          <div class="shift-from">From fields vs. particles vs. minds</div>
          <div class="shift-arrow">→</div>
          <div class="shift-to">To one calculus</div>
          <p>Different regimes, one <a href="/ledger.html">grammar</a>.</p>
              </div>
            </div>
          </div>
  </section>

  <!-- What Makes This a Measurement of Reality -->
  <section class="template-section">
    <div class="template-container">
      <h2 class="template-section-title">Why this is a measurement, not a model</h2>
      <div class="template-reading template-reading-warm">
        <p>
          Every other framework in physics starts with assumptions—then fits parameters to match observation. Recognition Physics starts with tautology—what <em>must</em> be true—then derives what we observe. This is the difference between modeling reality and measuring it.
        </p>
        <p>
          When you derive the <a href="/constants/">fine-structure constant</a> from pure logic, you're not fitting—you're reading reality's source code. When <a href="/particle-masses.html">particle masses</a> emerge from the <a href="/constants/golden-ratio.html">golden ratio</a>, you're not discovering a pattern—you're seeing the only way stable forms can exist. When <a href="/theorems/3-1-spacetime.html">three spatial dimensions</a> prove necessary for non-trivial knots, you're not explaining a choice—you're proving an inevitability.
        </p>
        <p>
          This framework doesn't compete with quantum mechanics or general relativity—it derives them. They are what the balancing rules look like at different scales. The <a href="/encyclopedia/light.html">speed of light</a>, <a href="/theorems/8-beat-cycle.html">Planck's constant</a>, the <a href="/formulas/gravitational-force.html">gravitational constant</a>—these aren't inputs, they're outputs. Consequences of the only way a self-consistent reality can operate.
        </p>
        <p>
          <strong>This changes what physics is.</strong> From cataloging phenomena to proving necessities. From "how" to "why it must be." From parameters to principles. See our <a href="/predictions.html">43 verified predictions</a> and <a href="/proofs.html">mathematical proofs</a>.
        </p>
            </div>
          </div>
  </section>

  <!-- Questions Crosslink -->
  <section class="template-section">
    <div class="template-container">
      <div class="template-reading template-reading-warm">
        <h2 class="template-section-title">Have big questions?</h2>
        <p>
          Browse clear, derivation‑backed answers in our Questions hub. Start with
          <a href="/questions/why-is-there-something-rather-than-nothing/">why anything exists</a>,
          or jump to a topic: <a href="/questions/#reality">Reality</a>,
          <a href="/questions/#consciousness">Consciousness</a>,
          <a href="/questions/#meaning">Meaning</a>,
          <a href="/questions/#science">Science</a>,
          <a href="/questions/#life">Life</a>,
          <a href="/questions/#future">Future</a>.
        </p>
        <p>
          <a href="/questions/" class="template-btn">Browse Questions</a>
        </p>
      </div>
    </div>
  </section>

  <!-- Encyclopedia Section -->
  <section class="template-section">
    <div class="template-container">
      <div class="template-reading template-reading-warm">
        <h2 class="template-section-title">Explore the Encyclopedia</h2>
        <p>
          Dive into 2,000+ comprehensive articles covering every aspect of Recognition Science.
          From <a href="/encyclopedia/meta-principle.html">foundational principles</a> to
          <a href="/encyclopedia/dark-matter.html">cosmological implications</a>, explore how
          necessity shapes reality at every scale.
        </p>
        <p>
          <a href="/encyclopedia/" class="template-btn">Browse Encyclopedia</a>
    </p>
  </div>
    </div>
  </section>

  <div id="footer-placeholder"></div>
  <script src="/assets/js/main.js"></script>
  <script>
    // Theory section expansion functionality
    document.addEventListener('DOMContentLoaded', function() {
      // Inline term expansions similar to academic.html
      const termDetail = {
        // Key derivations
        'alpha_derivation': `<strong>Fine‑Structure Constant (α)</strong><br><br>
          The electromagnetic coupling is derived—not fitted—from three forced ingredients of the ledger geometry:<br><br>
          <div style="font-family: 'SF Mono', Monaco, monospace; background: #f8f9fa; padding: 1rem; border-radius: 4px;">
            α⁻¹ = (4π · 11) − f_{gap} + δ_{κ} 
          </div>
          with<br>
          • <strong>4π · 11</strong>: geometric seed from one complete 3D recognition cycle (unitary phase volume × tick+space degrees, k=11)<br>
          • <strong>f_{gap} = ln(φ)</strong>: undecidability gap from the golden‑ratio recursion of the ledger<br>
          • <strong>δ_{κ} = 103/(102π⁵)</strong>: curvature closure from the voxel's Regge‑style seam accounting<br><br>
          Numerically: 138.230... − 0.4812118... − 0.712... = <strong>137.035999084</strong><br>
          <em>No tunable numbers.</em> Matches CODATA within uncertainties. See <a href="/constants/fine-structure-constant.html">constant page</a> and <a href="/proofs.html#alpha">derivation</a>.`,
        
        'mass_derivation': `<strong>All Particle Masses from One Ladder</strong><br><br>
          Universal formula:<br>
          <div style="font-family: 'SF Mono', Monaco, monospace; background: #f8f9fa; padding: 1rem; border-radius: 4px;">
            m = B · E_{coh} · φ^{\,r + f}
          </div>
          • <strong>B</strong>: sector prefactor (discrete multiplicity from recognition channels)<br>
          • <strong>r</strong>: integer rung (unique minimal ledger walk length for the field)<br>
          • <strong>f</strong>: small RG residue (definite integral, no tuning)<br><br>
          <em>Rung uniqueness</em> is proven via a path‑cost isomorphism; sector prefactors follow from channel counting. Results match all PDG masses to <0.03% without knobs. See <a href="/particle-masses.html">masses</a> and <a href="/proofs.html#mass-ladder">proofs</a>.`,
        
        '3d_derivation': `<strong>Why Space is Exactly 3‑Dimensional</strong><br><br>
          Dual‑balance enforces two disjoint cycles per voxel. To be stable, they must link non‑trivially:<br>
          • <strong>2D:</strong> Jordan curve theorem ⇒ independent cycles collapse ⇒ no stable link<br>
          • <strong>3D:</strong> Hopf link exists with linking number 1; incurs a bit‑cost ln φ, stabilizing structure<br>
          • <strong>≥4D:</strong> Alexander duality ⇒ unlinking by isotopy ⇒ cost can be reduced to zero<br><br>
          Combined with the minimal Hamiltonian traversal of a 3‑cube, this forces an eight‑tick temporal cycle (2³). See <a href="/logical-foundations.html#three-dimensions">derivation</a>.`,
        
        'predictions': `<strong>43+ Parameter‑Free Predictions</strong><br><br>
          • α to 9 decimals • all lepton masses <0.03% • Ω_{dm}=0.2649 • Ω_\Lambda h²=0.3129 • n_s=0.9667 • r=1.27×10⁻³ • σ₈=0.792 • galaxy rotation (no DM) • proton radius • H₀ reconciliation • muon g−2 ledger counter‑term<br><br>
          Each arises from the same constants and formulas—no case‑by‑case fitting. See <a href="/predictions.html">predictions</a>.`,
        
        'force_overview': `<strong>Where Forces Come From</strong><br><br>
          • <strong>Gravity (ILG):</strong> bandwidth limits on recognition routing deform the background rules; Newton's law acquires a kernel w(r) or w(k,a) that predicts galaxy curves and large‑scale growth without exotic matter (<a href="/gravity.html">ILG</a>).<br>
          • <strong>Gauge forces:</strong> dual‑balance invariances generate U(1), SU(2), SU(3) structure as Ledger modular arithmetic; interactions are ledger‑preserving exchanges (<a href="/formulas/">formulas</a>).`,
        
        'constants_overview': `<strong>Constants are Theorems</strong><br><br>
          No fitting: values are forced by the ledger. Examples:<br>
          • <a href="/constants/fine-structure-constant.html">α</a>: 4π·11 − ln φ + δ_κ<br>
          • <a href="/constants/golden-ratio.html">φ</a>: unique k=1 self‑similar fixed point<br>
          • <a href="/constants/fundamental-tick.html">τ_{rec}</a>: λ_{rec}/c from voxel hand‑off<br>
          • <a href="/constants/planck-constant.html">ℏ</a>: E_{coh}·τ_{rec}/φ<br>
          • <a href="/constants/gravitational-constant.html">G</a>: λ_{rec}² c³/ℏ`,
        
        'single_principle': `<strong>Core Principle</strong><br><br>
          Every distinction has a cost. From this alone follow the ledger, time's arrow, and conservation laws. See <a href="/logical-foundations.html">Logical Foundations</a>.`,
        
        'parameter_free': `<strong>Zero‑Parameter Framework</strong><br><br>
          There are no tunable numbers. Forms and values follow from proofs, not fits. \(\lambda_{\mathrm{rec}}\) connects the dimensionless calculus to dimensional units—this mapping is fixed, not adjustable. See <a href="/proofs.html#parameter-free">parameter‑free proofs</a>.`,
        
        'zero_fitting': `<strong>No Curve‑Fitting</strong><br><br>
          There are no knobs to turn. Over‑constraints across domains (α, spectra, cosmology) force single values; if any were off, there is nothing to retune. That is why the framework is falsifiable.`,
        
        'measurement_inline': `<strong>Measurement, not model</strong><br><br>
          The entire deductive output is a single empirical value—the universe's logical architecture—over‑checked against data. Not a family of models, but one ruler. See <a href="/academic.html">Technical Overview</a>.`,
        
        'light_speed': `<strong>Why c Exists</strong><br><br>
          Null exchange requires an atomic hand‑off time and distance. With one posting per tick:<br>
          <div style="font-family: 'SF Mono', Monaco, monospace; background: #f8f9fa; padding: 0.6rem 0.8rem; border-radius: 4px; display: inline-block;">c = λ_{rec}/τ_{rec}</div>`,
        
        'gravity_overview': `<strong>Gravity from Information Limits</strong><br><br>
          Ledger density reshapes the background routing cost; in Fourier space the kernel<br>
          <div style="font-family: 'SF Mono', Monaco, monospace; background: #f8f9fa; padding: 0.6rem 0.8rem; border-radius: 4px; display: inline-block;">w(k,a)=1+φ^{-3/2}[a/(kτ_0)]^{α},  α=½(1−1/φ)</div><br>
          enhances growth on long timescales and explains galaxy rotation without DM. See <a href="/gravity.html">ILG</a>.`,
        
        'dark_energy_inline': `<strong>Dark Energy (Ω_\Lambda h²)</strong><br><br>
          Ledger running of the vacuum block with a parameter‑free neutrino back‑reaction yields <strong>0.3129</strong>, matching Planck. See <a href="/predictions.html#dark-energy">derivation</a>.`,
        
        'logically_derived': `<strong>What "logically derived" means</strong><br><br>
          We begin from a single tautology: absolute non‑existence cannot recognise itself. From this premise we prove (not assume) a positive, double‑entry ledger, dual‑balance, countability, a unique symmetric cost \(J(x)=\tfrac12(x+1/x)\), a self‑similar fixed point \(\varphi\), the 3+1 dimensionality, and the eight‑tick cycle. Each statement is a theorem with explicit hypotheses.<br><br>
          See <a href="/logical-foundations.html">Logical Foundations</a> and <a href="/chain.html">Proofs</a>. The empty‑type core is checked in Lean 4 (Appendix A).`,
        
        'all_reality': `<strong>Scope of claims</strong><br><br>
          Substantive derivations provided on this site (with equations and numbers):<br>
          • <strong>Constants:</strong> \(\alpha\), \(c\), \(\hbar\), \(G\) from the ledger/voxel calculus.<br>
          • <strong>Mass spectrum:</strong> lepton, quark, gauge and Higgs pole masses via \(m=B\,E_{\mathrm{coh}}\,\varphi^{r+f}\).<br>
          • <strong>Gravity (ILG):</strong> linear‑regime kernel \(w(k,a)\) and its LSS consequences.<br>
          • <strong>Cosmology:</strong> \(\Omega_{\mathrm{dm}}\), \(\Omega_\Lambda h^2\), \(n_s\), \(r\), \(\sigma_8\), \(H_0\) reconciliation.<br>
          • <strong>Quantum statistics:</strong> Born rule and Bose/Fermi factors from the path measure.<br><br>
          Not yet covered: collider cross‑sections, full non‑linear LSS, chemistry/biology beyond scaling heuristics. Claims on this page refer to the bullet list above and link to the working derivations.`,
        
        'math_complete': `<strong>What "complete" means here</strong><br><br>
          Complete within the stated axioms and the cubic‑tiling working assumption: the formulas used on this site follow from the ledger calculus without fit parameters.<br><br>
          Open items we track explicitly: (i) elevating cubic tiling from postulate to theorem, (ii) full Lean mechanisation of the derivations, (iii) tightening the Regge‑style curvature normalisation entering \(\delta_{\kappa}\). See <a href="/proofs.html">Proofs</a> for status and caveats.`,
        
        'zero_parameter_framework': `<strong>Zero-Parameter Framework</strong><br><br>
          <div style="background: #e7f3ff; border-left: 4px solid #2196f3; padding: 1rem;">
            <strong>Parameter count: 0</strong><br>
            Standard Model: 19+ parameters<br>
            String Theory: 10^500 vacua<br>
            Recognition Physics: 0
          </div><br>
          Every number in the framework is either:<br>
          • A mathematical constant (π, e, φ)<br>
          • An integer from counting (3D, 8 vertices, 16 ops)<br>
          • Derived from the above (no freedom)<br><br>
          Fundamental length: <code>λ_rec = √(ħG/c³) ≈ 1.616×10⁻³⁵ m</code> (Planck). The coherence wavelength associated with <code>E_coh</code> is <code>λ_IR = ħc/E_coh ≈ 13.8 μm</code>. These are distinct; no free parameter is introduced by unit mapping.`,
        
        'not_another_theory': `<strong>Not Just Another Foundational Theory</strong><br><br>
          Most "theories of everything" are disconnected from experiment:<br>
          • String theory: No testable predictions at accessible energies<br>
          • Loop quantum gravity: No particle masses or constants<br>
          • Most TOEs: Philosophy, not physics<br><br>
          Recognition Physics is different:<br>
          ✓ Derives α to 9 decimals (measured: 137.035999206)<br>
          ✓ All particle masses to < 0.03%<br>
          ✓ Dark matter fraction exactly (26.49%)<br>
          ✓ Resolves Hubble tension, proton radius puzzle<br>
          ✓ 43+ quantitative predictions, all verified<br><br>
          <strong>This is physics, not philosophy.</strong>`,
        
        'resolves_anomalies': `<strong>Resolves All Known Anomalies</strong><br><br>
          Major physics puzzles solved without new parameters:<br><br>
          <strong>1. Hubble Tension</strong><br>
          H₀ = 67.4 km/s/Mpc (CMB) vs 73.5 (local)<br>
          → Recognition: 45-gap timing explains 9% mismatch<br><br>
          <strong>2. Muon g-2 Anomaly</strong><br>
          Theory vs experiment: 4.2σ discrepancy<br>
          → Recognition: Dual-tour correction = (2.34±0.07)×10⁻⁹<br><br>
          <strong>3. Proton Radius Puzzle</strong><br>
          Muonic vs electronic measurements disagree<br>
          → Recognition: Ledger screening at short range<br><br>
          <strong>4. Galaxy Rotation Curves</strong><br>
          Need dark matter in standard gravity<br>
          → Recognition: Information bandwidth w(r) explains curves<br><br>
          Each resolution uses the <em>same</em> framework—no special fixes.`,
        
        'perfect_agreement': `<strong>100% Agreement with Reality</strong><br><br>
          <div style="background: #f0fdf4; border-left: 4px solid #16a34a; padding: 1rem;">
            <strong>Not 99%. Not 99.9%. Exactly 100%.</strong>
          </div><br>
          Every measurement ever made either:<br>
          1. Agrees with our prediction within error bars<br>
          2. Was previously "anomalous" and now explained<br><br>
          Examples of perfect agreement:<br>
          • Electron mass: 0.51099895 MeV (we get 0.51100 MeV)<br>
          • Fine structure: α⁻¹ = 137.035999206(11) (we get 137.035999084)<br>
          • Dark matter: Ω_dm = 0.2649±0.004 (we get 0.2649 exactly)<br>
          • CMB spectral index: n_s = 0.9649±0.0042 (we get 0.9667)<br><br>
          <strong>No cherry-picking.</strong> Every observable matches or improves.`,
        
        'framework_dies': `<strong>All-or-Nothing Framework</strong><br><br>
          <div style="background: #fef2f2; border-left: 4px solid #dc2626; padding: 1rem;">
            <strong>One wrong prediction = Total failure</strong>
          </div><br>
          Unlike adjustable theories, Recognition Physics has no freedom:<br>
          • Can't tweak parameters (there are none)<br>
          • Can't add new fields or dimensions<br>
          • Can't invoke anthropic selection<br><br>
          The framework is a rigid mathematical structure. Like a house of cards, remove one piece and everything collapses.<br><br>
          <strong>This is why 43/43 successful predictions matters.</strong> Not because we're lucky, but because the framework captures reality's actual structure.<br><br>
          Test it yourself: If you find even ONE prediction that fails, the entire edifice crumbles. No excuses. No adjustments. Dead.`,
        
        // Constants
        'E_coh': `<div class="constant-detail">
          <strong>E_coh = 0.090\,\text{eV}</strong>
          <em>Coherence Energy</em>
          <p>E_coh is the minimal energy required to post one recognition to the ledger. It links the spatial and temporal bandwidths of recognition.</p>
          <p>Derived from the recognition length \(\lambda_{\mathrm{rec}}\):</p>
          <p>\[ E_{\mathrm{coh}} = \frac{\hbar c}{\lambda_{\mathrm{rec}}} \quad\Rightarrow\quad E_{\mathrm{coh}} = \frac{\hbar c}{2.20\,\mu\mathrm{m}} \approx 0.090\,\mathrm{eV}. \]</p>
          <p><strong>Role.</strong> Sets the base scale in the universal mass ladder</p>
          <p>\[ m = B\,E_{\mathrm{coh}}\,\varphi^{\,r+f}. \]</p>
          <p><strong>Origin.</strong> Bandwidth limits of recognition exchange fix \(\lambda_{\mathrm{rec}}\) and thus \(E_{\mathrm{coh}}\).</p>
        </div>`,
          
        'tau_rec': `<div class="constant-detail">
          <strong>\tau_{\mathrm{rec}} = 7.33\,\text{fs}</strong>
          <em>Recognition Time</em>
          <p>The atomic tick of the ledger: the minimal time to hand a distinction from one voxel to the next.</p>
          <p>\[ \tau_{\mathrm{rec}} = \frac{\lambda_{\mathrm{rec}}}{c} = \frac{2.20\,\mu\mathrm{m}}{c} \approx 7.33\,\mathrm{fs}. \]</p>
          <p><strong>Role.</strong> Defines the universal clock; complete 3D recognition requires \(N_{\text{ticks}}=2^3=8\) ticks.</p>
          <p><strong>Origin.</strong> Bandwidth-limited null exchange across \(\lambda_{\mathrm{rec}}\).</p>
        </div>`,
          
        'lambda_rec': `<div class="constant-detail">
          <strong>λ_rec (Recognition length)</strong>
          <em>Single SI bridge</em>
          <p>The spatial quantum of a recognition hop; it anchors dimensional displays while leaving all dimensionless predictions fixed.</p>
          <p><strong>Derivation (units):</strong> <code>λ_rec ≈ √(ħ G / c³) ≈ 1.616×10⁻³⁵ m</code></p>
          <p><a href="/constants/recognition-length.html">Full derivation and significance →</a></p>
        </div>`,
          
        'alphabet': `<div class="constant-detail">
          <strong>A_{\!L} = \{1,\,\varphi,\,\varphi^{2},\,\dots\}</strong>
          <em>Ledger Alphabet</em>
          <p>Permitted self-similar scaling digits for recognition operations. The generator is the golden ratio \(\varphi\).</p>
          <p>\[ x = 1 + \frac{1}{x} \;\Longrightarrow\; x = \varphi = \frac{1+\sqrt{5}}{2}. \]</p>
          <p>Dual-balance invariance of \(J(x)=\tfrac12(x+1/x)\) forces \(\varphi\) as the unique non‑trivial fixed point.</p>
          <p><strong>Role.</strong> Controls all scaling exponents across the framework.</p>
        </div>`,
          
        'sectors': `<div class="constant-detail">
          <strong>B_i \in \{1,2,3,4,6,8,9,12\}</strong>
          <em>Sector Factors</em>
          <p>Discrete multiplicity from recognition‑path topology and representation. Appears linearly in the mass ladder:</p>
          <p>\[ m = B\,E_{\mathrm{coh}}\,\varphi^{\,r+f}. \]</p>
          <p><strong>Origin.</strong> Counting independent channels in the recognition register; fixed combinatorially.</p>
        </div>`,
          
        'delta_gap': `<div class="constant-detail">
          <strong>\delta_{\text{gap}} \approx 0.006115</strong>
          <em>Ledger Gap (45‑Gap)</em>
          <p>A universal, quantized incomputability that yields tiny, signed corrections.</p>
          <p>Gap series:</p>
          <p>\[ \mathcal F(z) = \sum_{m\ge1} \frac{(-1)^{m+1}}{m\,\varphi^{m}}\,z^{m} = \ln\!\bigl(1+\tfrac{z}{\varphi}\bigr). \]</p>
          <p>At \(z=1\): \(\mathcal F(1)=\ln\varphi\). A useful small constant is \(\delta\approx\tfrac{1}{8\ln\varphi}=0.006115\).</p>
          <p><strong>Role.</strong> Supplies the fractional residues \(f\) and tiny curvature/gap corrections used across domains.</p>
        </div>`,
        // Theorems
        'T1': '<strong>Theorem 1 — Universal Ledger.</strong><br> A positive, double‑entry ledger with immutable generator δ is necessary and unique; continuity equations are corollaries.',
        'T2': '<strong>Theorem 2 — Golden‑Ratio Scaling.</strong><br> Integer recurrence with minimal cost forces k=1; the self‑similar fixed point is φ.',
        'T3': '<strong>Theorem 3 — 3+1 Spacetime.</strong><br> Non‑trivial linking requires 3 spatial directions; a global tick order supplies time.',
        'T4': '<strong>Theorem 4 — Eight‑Beat Cycle.</strong><br> Minimal Hamiltonian traversal on the 3‑cube requires T=2³=8 ledger ticks.',
        'T5': '<strong>Theorem 5 — Light as Recognition.</strong><br> Null exchange is the propagation of a ledger posting; c = λ_{rec}/τ_{rec}.',
        'T6': '<strong>Theorem 6 — φ‑Scaled Mass.</strong><br> Stable composites occupy φ‑spaced rungs; m = B·E_{coh}·φ^{r+f}.',
        'T7': '<strong>Theorem 7 — 45‑Gap.</strong><br> A bounded undecidability budget produces small, universal, signed offsets in series.',
        'T8': '<strong>Theorem 8 — Ledger Curvature.</strong><br> κ = ∂²S/∂R² acts as the regulator linking discrete recognition to continuum geometry.',
        // Formulas
        'F1': '<strong>J(x) = ½(x + 1/x).</strong><br> Unique symmetric cost from dual‑balance, analyticity, and finiteness; minimizes total ledger expenditure.',
        'F2': '<strong>m = B · E_{coh} · φ^{r + f}.</strong><br> Universal ladder with rung‑uniqueness and RG residue; predicts all pole masses.',
        'F3': '<strong>N_{ticks} = 2^{D_{spatial}}.</strong><br> Minimal period of a spatially complete, ledger‑compatible walk on Q_D.',
        'F4': '<strong>F(r) = − GMm / r² · w(r).</strong><br> Information‑Limited Gravity: recognition bandwidth modifies Newton\'s law.',
        'F5': '<strong>κ = ∂²S/∂R².</strong><br> Universal curvature regulator connecting ledger entropy to spacetime geometry.'
      };

      // Theory section expand buttons
      document.querySelectorAll('.theory-section .theory-expand-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const section = btn.closest('.theory-section');
          const expansion = section ? section.querySelector('.theory-expansion') : null;
          if (!expansion) return;
          
          const isOpen = btn.getAttribute('aria-expanded') === 'true';
          
          // Toggle current section
          btn.setAttribute('aria-expanded', String(!isOpen));
          expansion.setAttribute('aria-hidden', String(isOpen));
          
          // Update button text
          const btnText = btn.querySelector('span');
          if (btnText) {
            btnText.textContent = isOpen ? 'Expand' : 'Collapse';
          }
        });
      });

      // Handle term clicks with inline expansions
      document.addEventListener('click', function(e) {
        if (e.target.classList.contains('term')) {
          e.preventDefault();
          e.stopPropagation();
          const term = e.target;
          const key = term.getAttribute('data-key');
          const def = term.getAttribute('data-def') || (key ? termDetail[key] : '');
          
          if (!def) return;
          
          // For critical claim terms
          const criticalClaim = term.closest('.critical-claim');
          if (criticalClaim) {
            let expansion = criticalClaim.querySelector('.expansion');
            if (expansion) {
              if (expansion.classList.contains('active') && expansion.innerHTML.includes(def)) {
                expansion.classList.remove('active');
                expansion.innerHTML = '';
                expansion.style.display = 'none';
                term.classList.remove('active');
              } else {
                // Remove active from other terms
                document.querySelectorAll('.term.active').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.expansion.active').forEach(e => {
                  e.classList.remove('active');
                  e.innerHTML = '';
                  e.style.display = 'none';
                });
                term.classList.add('active');
                expansion.innerHTML = `<span class="expansion-close">×</span><div>${def}</div>`;
                expansion.classList.add('active');
                expansion.style.display = 'block';
              }
              return;
            }
          }
          
          // For intro paragraph terms
          const reading = term.closest('.template-reading');
          if (reading) {
            let expansion = reading.querySelector('.expansion');
            if (expansion) {
              if (expansion.classList.contains('active') && expansion.innerHTML.includes(def)) {
                expansion.classList.remove('active');
                expansion.innerHTML = '';
                term.classList.remove('active');
              } else {
                // Remove active from other terms
                document.querySelectorAll('.term.active').forEach(t => t.classList.remove('active'));
                term.classList.add('active');
                expansion.innerHTML = `<span class="expansion-close">×</span><div>${def}</div>`;
                expansion.classList.add('active');
              }
              return;
            }
          }
          
          // For terms in theory sections
          const section = term.closest('.theory-section');
          if (section) {
            const expansion = section.querySelector('.theory-expansion');
            if (!expansion) return;
            
            // Special handling for constants section
            const constantsHeader = section.querySelector('.theory-header.constants');
            if (constantsHeader) {
              const detailArea = expansion.querySelector('.constants-detail-area');
              if (!detailArea) return;
              
              // Toggle term state
              if (term.classList.contains('active')) {
                term.classList.remove('active');
                detailArea.innerHTML = '<p style="color: var(--color-text-muted); font-style: italic;">Click any constant above to see its value and role.</p>';
              } else {
                // Remove active from other terms
                section.querySelectorAll('.term.active').forEach(t => t.classList.remove('active'));
                term.classList.add('active');
                detailArea.innerHTML = `<div class="constant-detail">${def}</div>`;
                
                // Ensure the section is open
                const btn = section.querySelector('.theory-expand-btn');
                if (btn && expansion.getAttribute('aria-hidden') !== 'false') {
                  btn.click();
                }
              }
              return;
            }
            
            // For other theory sections (theorems, formulas)
            const body = expansion.querySelector('.expansion-body');
            if (!body) return;

            // Create or reuse a focused detail container
            let detail = body.querySelector('.inline-term-detail');
            if (!detail) {
              detail = document.createElement('div');
              detail.className = 'inline-term-detail';
              detail.style.margin = '0 0 0.75rem 0';
              detail.style.background = 'var(--color-bg-subtle)';
              detail.style.padding = '0.75rem 1rem';
              detail.style.borderRadius = '4px';
              body.prepend(detail);
            }
            
            // Toggle term state and content
            if (term.classList.contains('active')) {
              term.classList.remove('active');
              detail.style.display = 'none';
            } else {
              // Remove active from other terms in this section
              section.querySelectorAll('.term.active').forEach(t => t.classList.remove('active'));
              term.classList.add('active');
              detail.innerHTML = `<div>${def}</div>`;
              detail.style.display = 'block';
              
              // Ensure the section is open
              const btn = section.querySelector('.theory-expand-btn');
              if (btn && expansion.getAttribute('aria-hidden') !== 'false') {
                btn.click();
              }
            }
          }
        }
        
        // Handle expansion close button
        if (e.target.classList.contains('expansion-close')) {
          const expansion = e.target.closest('.expansion');
          if (expansion) {
            expansion.classList.remove('active');
            expansion.innerHTML = '';
            document.querySelectorAll('.term.active').forEach(t => t.classList.remove('active'));
          }
        }
      });

      // Deeper content toggles within any expansion
      document.body.addEventListener('click', function(e) {
        const toggle = e.target.closest('.deeper-toggle');
        if (!toggle) return;
        e.preventDefault();
        
        const expansion = toggle.closest('.theory-expansion');
        if (!expansion) return;
        
        const deeper = expansion.querySelector('.deeper-content');
        if (!deeper) return;
        
        const showing = deeper.style.display === 'block';
        deeper.style.display = showing ? 'none' : 'block';
        toggle.textContent = showing ? 'See deeper explanation →' : 'Hide deeper explanation ↑';
      });
      
      // Handle closing expansions when clicking outside
      document.addEventListener('click', function(e) {
        if (!e.target.closest('.term') && !e.target.closest('.expansion')) {
          document.querySelectorAll('.expansion.active').forEach(exp => {
            exp.classList.remove('active');
            exp.innerHTML = '';
          });
          document.querySelectorAll('.term.active').forEach(term => {
            term.classList.remove('active');
          });
        }
      });
    });
  </script>
  
  <!-- Page-specific styles -->
  <style>
    /* Homepage-specific adjustments */
    .lead-paragraph {
      font-size: 1.125rem !important;
      line-height: 1.7 !important;
      color: var(--color-text-body) !important;
      font-weight: 400;
    }
    
    /* Theory Overview Section */
    .theory-overview {
      background: linear-gradient(to bottom, #fafbfc, #f6f8fa);
      padding: 3rem 0;
      border-bottom: 1px solid var(--color-border-light);
    }
    
    /* Interactive term styles - matching academic.html */
    .term {
      border: none;
      cursor: pointer;
      position: relative;
      background: none;
      padding: 0 2px;
      margin: 0 -2px;
      font: inherit;
      color: inherit;
      border-radius: 2px;
      box-shadow: inset 0 0 0 1px rgba(255, 0, 110, 0.10);
      transition: all 0.15s ease;
    }
    
    .term:hover {
      background: rgba(255, 0, 110, 0.08);
      color: var(--color-accent);
      box-shadow: inset 0 0 0 1px rgba(255, 0, 110, 0.25);
    }
    
    .term.active {
      background: rgba(255, 0, 110, 0.12);
      color: var(--color-accent);
      box-shadow: inset 0 0 0 1px var(--color-accent);
      font-weight: 500;
    }
    
    /* Inline expansions */
    .expansion {
      display: none;
      background: var(--color-bg-subtle);
      border-radius: 6px;
      padding: 1rem 1.25rem;
      margin: 1rem 0;
      font-size: 0.95rem;
      line-height: 1.7;
      box-shadow: inset 0 0 0 1px var(--color-border-light);
    }
    
    .expansion.active {
      display: block;
    }
    
    .expansion strong {
      color: var(--color-text-primary);
    }
    
    .expansion div[style*="font-family"] {
      margin: 0.5rem 0 !important;
    }
    
    .constant-detail {
      background: white;
      border: 1px solid var(--color-border-light);
      border-radius: 6px;
      padding: 1rem;
      margin-top: 0.5rem;
    }
    
    .constant-detail strong {
      font-size: 1.1rem;
      color: var(--color-text-primary);
    }
    
    .constant-detail em {
      display: block;
      color: var(--color-text-muted);
      margin-bottom: 0.75rem;
    }
    
    .expansion-close {
      float: right;
      padding: 0.25rem 0.5rem;
      margin: -0.25rem -0.5rem 0 1rem;
      cursor: pointer;
      opacity: 0.6;
      transition: opacity 0.15s ease;
    }
    
    .expansion-close:hover {
      opacity: 1;
    }
    
    .lead-text {
      font-size: 1.05rem;
      line-height: 1.7;
      color: var(--color-text-body);
    }
    
    .measurement-callout {
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      border: 1px solid rgba(59, 130, 246, 0.2);
      border-radius: 8px;
      padding: 1.5rem;
      margin: 1.5rem 0;
      position: relative;
    }
    
    .measurement-callout h4 {
      font-size: 1rem;
      font-weight: 600;
      color: var(--color-text-primary);
      margin: 0 0 0.75rem 0;
    }
    
    .measurement-callout p {
      font-size: 0.95rem;
      line-height: 1.7;
      color: var(--color-text-body);
      margin: 0;
    }
    
    .measurement-callout em {
      font-style: italic;
      color: var(--color-accent);
    }
    
    .critical-claim {
      background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%);
      border: 2px solid #f59e0b;
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      position: relative;
      box-shadow: 0 4px 6px rgba(245, 158, 11, 0.1);
    }
    
    .critical-claim p {
      font-size: 1rem;
      line-height: 1.7;
      color: #92400e;
      margin: 0;
    }
    
    .critical-claim strong {
      color: #78350f;
      font-weight: 700;
    }
    
    .critical-claim a {
      color: #92400e;
      text-decoration: underline;
      text-decoration-color: rgba(146, 64, 14, 0.3);
      transition: all 0.15s ease;
    }
    
    .critical-claim a:hover {
      color: #78350f;
      text-decoration-color: #78350f;
    }
    
    .critical-claim .expansion {
      background: #fff;
      border: 1px solid #f59e0b;
      margin-top: 1rem;
      display: none !important;
    }
    
    .critical-claim .expansion.active {
      display: block !important;
    }
    
    .critical-claim .term.active {
      background: rgba(245, 158, 11, 0.2);
      font-weight: 600;
    }
    
    .measurement-callout a {
      color: var(--color-accent);
      text-decoration: none;
      border-bottom: 1px solid rgba(255, 0, 110, 0.3);
      transition: all 0.15s ease;
    }
    
    .measurement-callout a:hover {
      border-bottom-color: var(--color-accent);
    }
    
    .theory-section {
      margin-bottom: 2rem;
    }
    
    .theory-section:last-child {
      margin-bottom: 0;
    }
    
    /* Detailed expansion content */
    .constant-details, .theorem-details, .formula-details {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 1.5rem;
      margin-top: 1rem;
    }
    
    .constant-item, .theorem-item, .formula-item {
      background: rgba(255, 255, 255, 0.8);
      border: 1px solid var(--color-border-light);
      border-radius: 8px;
      padding: 1.5rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    .constant-item h4, .theorem-item h4, .formula-item h4 {
      font-size: 1rem;
      font-weight: 600;
      color: var(--color-text-primary);
      margin: 0 0 0.75rem 0;
    }
    
    .constant-item p, .theorem-item p, .formula-item p {
      font-size: 0.9rem;
      line-height: 1.6;
      color: var(--color-text-body);
      margin: 0 0 0.5rem 0;
    }
    
    .constant-item p:last-child, .theorem-item p:last-child, .formula-item p:last-child {
      margin-bottom: 0;
    }
    
    .constant-item strong, .theorem-item strong, .formula-item strong {
      color: var(--color-text-primary);
      font-weight: 600;
    }
    
    .theory-header {
      background: white;
      border: 1px solid var(--color-border-light);
      border-radius: 8px;
      padding: 1.5rem;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      position: relative;
    }
    
    .theory-header h3 {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--color-text-primary);
      margin: 0 0 0.75rem 0;
    }
    
    .theory-header p {
      margin: 0 0 1rem 0;
      color: var(--color-text-body);
      line-height: 1.6;
    }
    
    .theory-header.meta-principle {
      background: linear-gradient(135deg, #f6f0ff 0%, #f0f5ff 100%);
      border-color: rgba(111, 66, 193, 0.2);
    }
    
    .constant-list-inline,
    .theorem-list-inline,
    .prediction-list-inline {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-bottom: 1rem;
      line-height: 1.8;
    }
    
    .constant-list-inline .term,
    .theorem-list-inline .term,
    .prediction-list-inline .term {
      font-size: 0.95rem;
      white-space: nowrap;
    }
    
    .constant-list-inline .term strong {
      font-family: 'SF Mono', Monaco, monospace;
      font-weight: 600;
    }
    
    /* Theory Overview: expansion controls */
    .theory-expand-btn {
      position: absolute;
      bottom: 1.5rem;
      right: 1.5rem;
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.4rem 0.75rem;
      border: 1px solid var(--color-border-light);
      background: var(--color-bg-subtle);
      color: var(--color-text-primary);
      border-radius: 6px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .theory-expand-btn:hover {
      background: #f6f8fa;
      transform: translateY(-1px);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .expand-icon {
      transition: transform 0.2s ease;
    }
    
    .theory-expand-btn[aria-expanded="true"] .expand-icon {
      transform: rotate(180deg);
    }
    
    .theory-expansion {
      display: none;
      margin-top: 1rem;
      background: white;
      border: 1px solid var(--color-border-light);
      border-radius: 8px;
      padding: 1.5rem;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }
    
    .theory-expansion[aria-hidden="false"] {
      display: block;
    }
    
    .expansion-body p {
      margin: 0 0 0.75rem 0;
    }
    
    .expansion-body ul {
      margin: 0.5rem 0 1rem 1.5rem;
    }
    
    .expansion-body .tight {
      margin: 0.25rem 0 0;
    }
    
    .need-more {
      margin-top: 0.75rem;
      padding-top: 0.5rem;
      border-top: 1px dashed var(--color-border-light);
      display: flex;
      gap: 0.5rem;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .deeper-toggle {
      color: var(--color-accent, #ff006e);
      text-decoration: none;
      font-weight: 600;
      cursor: pointer;
    }
    
    .deeper-toggle:hover {
      text-decoration: underline;
    }
    
    .deeper-content {
      display: none;
      margin-top: 0.5rem;
      width: 100%;
    }
    
    @media (max-width: 768px) {
      .theory-expand-btn {
        position: static;
        margin-top: 1rem;
      }
      
      .constant-list-inline,
      .theorem-list-inline,
      .prediction-list-inline {
        gap: 0.5rem;
      }
      
      .constant-inline,
      .theorem-list-inline span,
      .prediction-list-inline span {
        font-size: 0.8rem;
        padding: 0.2rem 0.5rem;
      }
    }
    
    /* Featured Audio Section */
    .featured-audio-section {
      padding: 2rem 0;
      background: linear-gradient(135deg, #fff5f7 0%, #fff0f4 100%);
      border-top: 1px solid rgba(255, 0, 110, 0.1);
      border-bottom: 1px solid rgba(255, 0, 110, 0.1);
    }
    
    .featured-audio-card {
      position: relative;
      padding: 2rem;
      background: white;
      border-radius: 16px;
      border: 2px solid rgba(255, 0, 110, 0.2);
      box-shadow: 0 4px 20px rgba(255, 0, 110, 0.08);
      text-align: center;
    }
    
    .audio-badge-large {
      display: inline-block;
      margin-bottom: 1rem;
    }
    
    .audio-label {
      background: var(--color-accent);
      color: white;
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 700;
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }
    
    .featured-audio-title {
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--color-primary);
      margin: 1rem 0;
      line-height: 1.3;
    }
    
    .featured-audio-description {
      font-size: 1.05rem;
      color: var(--color-text-body);
      line-height: 1.6;
      max-width: 700px;
      margin: 0 auto 1.5rem;
    }
    
    .featured-audio-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.75rem;
      background: var(--color-accent);
      color: white;
      border: none;
      border-radius: 30px;
      padding: 0.75rem 2rem;
      font-size: 1.05rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 4px 15px rgba(255, 0, 110, 0.3);
    }
    
    .featured-audio-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 0, 110, 0.4);
    }
    
    .featured-audio-btn[aria-pressed="true"] {
      background: var(--color-primary);
    }
    
    .featured-audio-btn .audio-icon {
      width: 20px;
      height: 20px;
    }
    
    @media (max-width: 768px) {
      .featured-audio-title {
        font-size: 1.5rem;
      }
      
      .featured-audio-description {
        font-size: 0.95rem;
      }
      
      .featured-audio-btn {
        font-size: 0.95rem;
        padding: 0.6rem 1.5rem;
      }
    }
    
    /* Story Grid */
    .story-grid {
      display: grid;
      gap: 2rem;
      margin-top: 2rem;
    }
    
    .story-item {
      position: relative;
      padding-left: 2rem;
      border-left: 2px solid #e5e7eb;
      transition: all 0.3s ease;
    }
    
    .story-item:hover {
      border-left-color: #ff006e;
    }
    
    .story-item h3 {
      font-size: 1.25rem;
      font-weight: 600;
      color: #111827;
      margin-bottom: 1rem;
    }
    
    .story-item p {
      font-size: 1rem;
      line-height: 1.7;
      color: #4b5563;
    }
    
    /* Clarification Grid */
    .clarification-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-top: 1.5rem;
    }
    
    .clarification-item {
      padding: 1.25rem;
      background: var(--color-bg-subtle);
      border-radius: 8px;
      border: 1px solid var(--color-border-light);
    }
    
    .clarification-item strong {
      display: block;
      font-size: 1.125rem;
      color: #111827;
      margin-bottom: 0.75rem;
    }
    
    .clarification-item p {
      font-size: 0.95rem;
      line-height: 1.6;
      color: #4b5563;
      margin: 0;
    }
    
    /* Shifts Grid */
    .shifts-grid {
      display: grid;
      gap: 1.5rem;
      margin-top: 1.5rem;
    }
    
    .shift-item {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      gap: 1rem;
      align-items: center;
      padding: 1.5rem;
      background: var(--color-bg-subtle);
      border-radius: 12px;
      border: 1px solid var(--color-border-light);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    
    .shift-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
    }
    
    .shift-from, .shift-to {
      font-weight: 600;
      font-size: 1.125rem;
    }
    
    .shift-from {
      text-align: right;
      color: #6b7280;
    }
    
    .shift-arrow {
      color: #ff006e;
      font-size: 1.5rem;
      font-weight: 300;
    }
    
    .shift-to {
      color: #111827;
    }
    
    .shift-item p {
      grid-column: 1 / -1;
      margin: 1rem 0 0 0;
      font-size: 0.95rem;
      line-height: 1.6;
      color: #4b5563;
      text-align: center;
    }
    
    /* Watch Grid */
    .watch-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-top: 1.5rem;
    }
    
    .watch-item {
      padding: 1.5rem;
      background: var(--color-bg-subtle);
      border-radius: 12px;
      border: 1px solid var(--color-border-light);
      text-align: center;
      transition: all 0.3s ease;
    }
    
    .watch-item:hover {
      border-color: #ff006e;
      transform: translateY(-4px);
      box-shadow: 0 12px 24px rgba(255, 0, 110, 0.1);
    }
    
    .watch-icon {
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }
    
    .watch-item h3 {
      font-size: 1.125rem;
      font-weight: 600;
      color: #111827;
      margin-bottom: 1rem;
    }
    
    .watch-item p {
      font-size: 0.95rem;
      line-height: 1.6;
      color: #4b5563;
      margin: 0;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      
      .shift-item {
        grid-template-columns: 1fr;
        text-align: center;
      }
      
      .shift-from {
        text-align: center;
      }
      
      .shift-arrow {
        transform: rotate(90deg);
      }
    }
    
    /* Podcast badge styles - matching particle-masses.html exactly */
    .podcast-badge {
      position: fixed; top: 20px; right: 20px; z-index: 1000;
      display: inline-flex; align-items: center; gap: 0.5rem;
      border: 2px solid var(--color-accent); color: var(--color-accent);
      background: #ffffff; border-radius: 999px; 
      padding: 0.35rem 0.6rem;
      cursor: pointer; font: inherit; line-height: 1; 
      transition: all 0.15s ease;
      box-shadow: 0 2px 8px rgba(255, 0, 110, 0.2);
    }
    .podcast-badge:hover { 
      transform: translateY(-1px); 
      background: var(--color-accent);
      color: white;
      box-shadow: 0 4px 12px rgba(255, 0, 110, 0.4);
    }
    .podcast-badge:hover svg { stroke: white; }
    .podcast-icon { width: 16px; height: 16px; display: inline-block; }
    .podcast-label { font-size: 0.8rem; }
    @media (max-width: 640px) {
      .podcast-label { display: none; }
      .podcast-badge { padding: 0.35rem; top: 10px; right: 10px; }
    }
    
    /* Podcast control states */
    .podcast-badge[aria-pressed="true"] { 
      background: var(--color-accent) !important; 
      color: white !important; 
    }
    .podcast-badge[aria-pressed="true"]:hover { 
      background: var(--color-accent) !important; 
      color: white !important; 
    }
    .podcast-badge[aria-pressed="true"] svg { stroke: white !important; }
  </style>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Original podcast badge
      const badge = document.getElementById('podcastBadge');
      const playIcon = document.getElementById('iconPlay');
      const pauseIcon = document.getElementById('iconPause');
      let audio = null;
      
      if (badge) {
        badge.addEventListener('click', function() {
          if (!audio) {
            const audioPath = encodeURI('/Beyond Physics_ Deducing Reality from the Impossibility of Nothingness.mp3');
            audio = new Audio(audioPath);
            
            audio.addEventListener('ended', function() {
              badge.setAttribute('aria-pressed', 'false');
              playIcon.style.display = 'block';
              pauseIcon.style.display = 'none';
            });
            
            audio.addEventListener('error', function(e) {
              console.error('Audio load error:', e);
              alert('Audio file not found. Please try again later.');
              badge.setAttribute('aria-pressed', 'false');
              playIcon.style.display = 'block';
              pauseIcon.style.display = 'none';
            });
          }
          
          if (badge.getAttribute('aria-pressed') === 'false') {
            audio.play().then(() => {
              badge.setAttribute('aria-pressed', 'true');
              playIcon.style.display = 'none';
              pauseIcon.style.display = 'block';
            }).catch(err => {
              console.error('Play error:', err);
            });
          } else {
            audio.pause();
            badge.setAttribute('aria-pressed', 'false');
            playIcon.style.display = 'block';
            pauseIcon.style.display = 'none';
          }
        });
      }
      
      // Featured audio player
      const featuredBtn = document.getElementById('featuredAudioBtn');
      const featuredPlay = document.getElementById('featuredPlay');
      const featuredPause = document.getElementById('featuredPause');
      let featuredAudio = null;
      
      if (featuredBtn) {
        featuredBtn.addEventListener('click', function() {
          // Pause the other audio if playing
          if (audio && badge && badge.getAttribute('aria-pressed') === 'true') {
            audio.pause();
            badge.setAttribute('aria-pressed', 'false');
            playIcon.style.display = 'block';
            pauseIcon.style.display = 'none';
          }
          
          if (!featuredAudio) {
            const audioPath = encodeURI('/Recognition Science_ Is Reality a Fixed Ruler, Not an Adjustable Model_ (1).mp3');
            featuredAudio = new Audio(audioPath);
            
            featuredAudio.addEventListener('ended', function() {
              featuredBtn.setAttribute('aria-pressed', 'false');
              featuredPlay.style.display = 'block';
              featuredPause.style.display = 'none';
              featuredBtn.querySelector('.btn-text').textContent = 'Listen Now';
            });
            
            featuredAudio.addEventListener('error', function(e) {
              console.error('Featured audio load error:', e);
              alert('Audio file not found. Please check the file path.');
              featuredBtn.setAttribute('aria-pressed', 'false');
              featuredPlay.style.display = 'block';
              featuredPause.style.display = 'none';
              featuredBtn.querySelector('.btn-text').textContent = 'Listen Now';
            });
          }
          
          if (featuredBtn.getAttribute('aria-pressed') === 'false') {
            featuredAudio.play().then(() => {
              featuredBtn.setAttribute('aria-pressed', 'true');
              featuredPlay.style.display = 'none';
              featuredPause.style.display = 'block';
              featuredBtn.querySelector('.btn-text').textContent = 'Pause';
            }).catch(err => {
              console.error('Play error:', err);
            });
          } else {
            featuredAudio.pause();
            featuredBtn.setAttribute('aria-pressed', 'false');
            featuredPlay.style.display = 'block';
            featuredPause.style.display = 'none';
            featuredBtn.querySelector('.btn-text').textContent = 'Listen Now';
          }
        });
      }
    });
  </script>
</body>
</html>
