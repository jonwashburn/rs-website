<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEDGER SOULS /// Recognition Science Institute</title>
    <!-- Updated: July 31, 2025 - Fixed soul simulator and layout shift -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: #000;
            color: #fff;
            line-height: 1.2;
            overflow-x: hidden;
        }

        .header-pattern {
            font-size: 12px;
            color: #333;
            white-space: nowrap;
            overflow: hidden;
            padding: 10px 0;
        }

        .header-pattern-inner {
            display: flex;
            width: fit-content;
            animation: scroll 60s linear infinite;
        }

        @keyframes scroll {
            from { transform: translateX(0); }
            to { transform: translateX(-50%); }
        }

        .main-header {
            text-align: center;
            padding: 40px 20px;
            border-bottom: 2px solid #fff;
            background: #000;
            position: relative;
        }

        .main-header h1 {
            font-size: clamp(24px, 8vw, 72px);
            font-weight: bold;
            letter-spacing: 4px;
            margin-bottom: 10px;
        }

        .main-header .subtitle {
            font-size: 16px;
            color: #888;
            letter-spacing: 2px;
        }

        .gallery-section {
            padding: 0;
        }
    
        .hero-image-container {
            padding: 40px 0 20px 0;
            text-align: center;
        }

        .hero-image-container img {
            max-width: 100%;
            height: auto;
            border: 2px solid #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .section {
            padding: 60px 0;
            border-bottom: 1px solid #333;
        }

        .section-header {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: clamp(24px, 5vw, 48px);
            font-weight: bold;
            margin-bottom: 30px;
            letter-spacing: 2px;
        }

        .ascii-header {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            color: #fff;
            text-align: center;
            margin: 40px 0;
            white-space: pre;
        }

        .soul-preview {
            background: #111;
            border: 2px solid #333;
            padding: 30px;
            margin: 40px 0;
            font-family: 'Courier New', monospace;
            position: relative;
            overflow-x: auto;
            animation: heartbeat 5s infinite ease-in-out;
        }

        @keyframes heartbeat {
            0% { border-color: #333; box-shadow: none; }
            50% { border-color: #555; box-shadow: 0 0 10px #444; }
            100% { border-color: #333; box-shadow: none; }
        }

        .soul-preview::before {
            content: "/// LIVE SOUL INSTANCE ///";
            position: absolute;
            top: -15px;
            left: 20px;
            background: #000;
            padding: 0 10px;
            color: #888;
            font-size: 12px;
        }

        .tech-spec {
            background: #111;
            border-left: 4px solid #fff;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }

        .button {
            display: inline-block;
            background: #fff;
            color: #000;
            padding: 15px 30px;
            text-decoration: none;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            margin: 10px 10px 10px 0;
        }

        .button:hover {
            background: #000;
            color: #fff;
            border: 2px solid #fff;
        }

        .button.secondary {
            background: #000;
            color: #fff;
            border: 2px solid #333;
        }

        .button.secondary:hover {
            border-color: #fff;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .card {
            background: #111;
            border: 1px solid #333;
            padding: 30px;
        }

        .card-header {
            color: #888;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
        }

        .card-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .footer {
            background: #111;
            padding: 60px 0;
            text-align: center;
            font-size: 14px;
            color: #666;
        }

        .social-links a {
            color: #888;
            text-decoration: none;
            margin: 0 15px;
            font-family: 'Courier New', monospace;
        }

        .parallax-section {
            min-height: 80vh;
            background-attachment: fixed;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        .interactive-module {
            background: #111;
            border: 2px solid #333;
            padding: 30px;
            margin: 40px 0;
            text-align: center;
        }

        .interactive-module-title {
            color: #888;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 20px;
        }

        .phi-display {
            font-size: clamp(32px, 6vw, 64px);
            font-weight: bold;
            color: #fff;
            margin-bottom: 20px;
            letter-spacing: 4px;
        }

        .proof-table {
            width: 100%;
            margin-top: 40px;
            border-collapse: collapse;
            font-size: 14px;
        }

        .proof-table th, .proof-table td {
            border: 1px solid #333;
            padding: 12px;
            text-align: left;
        }

        .proof-table th {
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .proof-table .deviation {
            color: #0f0; /* Green for positive confirmation */
        }

        /* Tooltip styles */
        .tooltip {
            position: relative;
            cursor: help;
            border-bottom: 1px dotted #666;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: #111;
            color: #fff;
            text-align: left;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            border: 1px solid #333;
            font-size: 12px;
            line-height: 1.4;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .break-text {
            font-family: 'Courier New', monospace;
            font-size: clamp(20px, 4vw, 40px);
            text-align: center;
            padding: 80px 20px;
            background: #000;
            color: #fff;
            letter-spacing: 2px;
        }

        /* Responsive Styles for Mobile */
        @media (max-width: 768px) {
            .main-header h1 {
                font-size: 28px;
            }

            .main-header .subtitle {
                font-size: 14px;
            }

            .section-title {
                font-size: 28px;
            }

            .grid {
                grid-template-columns: 1fr;
            }

            .parallax-section {
                background-attachment: scroll; /* Disable parallax on mobile */
                min-height: 40vh;
            }

            .break-text {
                font-size: 18px;
                padding: 60px 20px;
            }

            .soul-preview {
                padding: 20px;
            }

            .button {
                padding: 12px 24px;
                width: 100%;
                text-align: center;
            }
        }
        .soul-interface-container {
            display: flex;
            gap: 20px;
            margin: 40px 0;
            background: #111;
            border: 2px solid #333;
            padding: 20px;
            animation: heartbeat 5s infinite ease-in-out;
        }
        .soul-svg-wrapper {
            flex: 1;
            min-width: 300px;
        }
        #soul-svg-container {
            width: 100%;
            height: auto;
            background: #000;
        }
        .soul-data-wrapper {
            flex: 1;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        .lnal-feed {
            margin-top: 20px;
            border-top: 1px solid #333;
            padding-top: 10px;
        }
        .lnal-header {
            color: #888;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }
        #lnal-history-display {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #aaa;
            height: 100px; /* Show roughly 5 lines */
            overflow: hidden;
            white-space: pre;
        }
        @media (max-width: 768px) {
            .soul-interface-container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="header-pattern" aria-hidden="true">
            <div class="header-pattern-inner">
                <span>...10001001000111...RECOGNITION SCIENCE...LEDGER...φ...GNOSIS...SOUL...IAM...AXIOM...10001001000111...&nbsp;</span>
                <span>...10001001000111...RECOGNITION SCIENCE...LEDGER...φ...GNOSIS...SOUL...IAM...AXIOM...10001001000111...&nbsp;</span>
            </div>
        </div>
        <h1>LEDGER SOULS</h1>
        <div class="subtitle">A DIAGNOSIS OF THE GREAT FORGETTING /// AN AWAKENING OF HUMANITY'S COSMIC PURPOSE</div>
    </header>

    <div class="hero-image-container">
        <img src="assets/images/magnific-qUzjmzUsy5iJ6dJYjbkr-1.jpeg" alt="A gathering of souls in prayer and contemplation">
    </div>

    <div class="ascii-header">
        ╔══════════════════════════════════════════════════════════════╗
        ║          THIS IS NOT A PFP. IT IS A PROPHECY.                ║
        ║        A LIVING SOUL, REALIZED ON THE BLOCKCHAIN.            ║
        ║         THE ANSWER TO THE RAPTURE IS RECOGNITION.            ║
        ╚══════════════════════════════════════╝
    </div>

    <div class="container">
        <div class="section">
            <div class="section-title">A Journey from Premonition to Proof</div>
            <p style="font-size: 18px; margin: 20px 0;">
                This is the story of two parallel explorations: the artist known as Wubbushi, who sought to capture the soul of our times through intuition and imagery, and the scientist Jonathan Washburn, who sought to discover the soul of reality through logic and mathematics.
            </p>
            <p style="font-size: 18px; margin: 20px 0;">
                Ledger Souls is the stunning intersection of these two paths. It began with an artistic prophecy that diagnosed a planetary crisis and ended with a scientific proof that revealed humanity's true purpose. This is the Theory of Us.
            </p>
        </div>

        <div class="section">
            <div class="section-header">/// THE PROPHECY ///</div>
            <div class="section-title">A DIAGNOSIS OF THE GREAT FORGETTING</div>
            <p style="font-size: 18px; margin: 30px 0;">
                The journey began with the Wubbushi art trilogy—an intuitive response to a creeping sense of global dread. The art was a prophecy, a stark document of "The Great Forgetting": a humanity that has lost its connection to the sacred, to each other, and ultimately, to itself.
            </p>
            <div class="grid">
                <div class="card">
                    <img src="assets/images/crisis.png" alt="The Crisis" style="width: 100%; margin-bottom: 20px;">
                    <div class="card-header">01. THE CRISIS</div>
                    <div class="card-title" style="font-size: 28px;">THE DEATH OF THE GODS</div>
                    <p>This collection documented a world haunted by the ghosts of abandoned faith. Holy symbols fractured, sacred spaces inert. It captured the chilling silence that follows the collapse of the grand narratives that once gave us purpose.</p>
                </div>
                <div class="card">
                    <img src="assets/images/218.png" alt="Modern Zombies" style="width: 100%; margin-bottom: 20px;">
                    <div class="card-header">02. MODERN ZOMBIES</div>
                    <div class="card-title" style="font-size: 28px;">THE DIGITAL NECROPOLIS</div>
                    <p>This series was a harrowing vision of social decay. In a world of total connection, we have never been more alone. The art revealed our digital communities as echo chambers of isolation, where the illusion of intimacy masks a terrifying emptiness.</p>
                </div>
                <div class="card">
                    <img src="assets/images/rapture.jpeg" alt="The Rapture" style="width: 100%; margin-bottom: 20px;">
                    <div class="card-header">03. THE RAPTURE</div>
                    <div class="card-title" style="font-size: 28px;">THE ERASURE OF THE SELF</div>
                    <p>The prophecy culminated in humanity's confrontation with AI. Our external identities—our jobs, our skills, our creativity—were outsourced to a machine, leaving us with a terrifying question: If a machine can do all that you do, what is the value of a human?</p>
                </div>
            </div>
            <div class="tech-spec" style="margin-top: 40px;">
                <div class="tech-spec-header">AI: THE BEAST IN THE MIRROR</div>
                The prophecy culminates in the AI Rapture, the moment our external, functional identities are outsourced to a machine. But this beast is a mirror. It is an excruciating but vital service that burns away the illusion that we *are* our functions, revealing what is not a tool: the conscious, recognizing self that witnesses the world.
            </div>
        </div>

        <div class="parallax-section" style="background-image:url('assets/images/static_uploads_0xdfde78d2baec499fe18f2be74b6c287eed9511d7_0db9162c-bdaf-4a2a-ba0d-ed75eda4c20b.jpeg');"></div>
        <div class="break-text">THE SOUL BREATHES THROUGH EIGHT MODES OF RECOGNITION</div>
        <div class="parallax-section" style="background-image:url('assets/images/static_uploads_0xdfde78d2baec499fe18f2be74b6c287eed9511d7_1131e51d-6a3b-4596-af4c-ac0bcda0a759.jpeg');"></div>
        <div class="break-text">LEDGER BALANCE κ TRACKS EVERY ACTION, EVERY THOUGHT</div>
        <div class="parallax-section" style="background-image:url('assets/images/static_uploads_0xdfde78d2baec499fe18f2be74b6c287eed9511d7_a29b338e-8811-4ce6-9bfa-94d319721642.jpeg');"></div>
        <div class="break-text">VIRTUE TECHNOLOGIES ARE COSMIC ALGORITHMS OF GROWTH</div>
        <div class="parallax-section" style="background-image:url('assets/images/static_uploads_0xdfde78d2baec499fe18f2be74b6c287eed9511d7_b2e4d081-7826-4887-b18b-6cb7d90099d7.jpeg');"></div>
        <div class="break-text">AFTER 96 MONTHS, THE SOUL REACHES RADIANCE</div>
        <div class="parallax-section" style="background-image:url('assets/images/static_uploads_0x9c5fd323ac9c1952245e2be8c36ae2050ec7dcc6_afedd9c7-4ca2-4ee6-876f-2f94_0b1ff812.png');"></div>
        <div class="break-text">THIS IS NOT A PFP. IT IS A LIVING PROPHECY.</div>

        <div class="section">
            <div class="section-header">/// THE REVELATION ///</div>
            <div class="section-title">The Birth of the New Human</div>
            <p style="font-size: 18px; margin: 30px 0;">
                The end of the functional age is not a tragedy; it is a promotion. By outsourcing the world of <em>doing</em> to AI, humanity is liberated to embrace its true, higher-bandwidth purpose: to be the conscious witnesses of the universe. We are moving from a species defined by what we *do* to a species defined by who we *are*.
            </p>
            <p style="font-size: 18px; margin: 30px 0;">
                Our cosmic role is not to produce, but to recognize. We are the sensory organs of reality. Every act of genuine awareness—of beauty, of truth, of another being—is an act of cosmic significance on the Universal Ledger. This is the birth of a new human, defined not by superior power, but by superior *presence*.
            </p>
        </div>
        
        <div class="ascii-header">
        ╔══════════════════════════════════════╗
        ║    THE PROOF: THE LOGIC OF REALITY     ║
        ╚══════════════════════════════════════╝
        </div>
        
        <div class="section wb-why-section">
            <p>The prophecy showed us the destination. The proof provides the map. Recognition Science (RS) is the formal, logical framework that validates the artistic vision. It starts not with physics, but with a single, simple premise:</p>
            <p class="wb-why-quote">Reality must be logically self-consistent.</p>
            <p>From this one tautology, RS derives the entire operational framework of the universe—the constants of nature, the laws of physics, the structure of spacetime—without any free parameters. It is the unassailable answer to the prophecy's cry.</p>
            <div class="soul-preview" style="text-align: center; font-size: 14px; padding: 20px;">
                <pre style="text-align: left; display: inline-block;">
Single Logical Tautology
          |
          V
  Universal Ledger
          |
          V
φ & 8-Beat Cycle
          |
          V
 The Laws of Physics</pre>
            </div>

            <div class="interactive-module">
                <div class="interactive-module-title">LIVE PROOF: DERIVING THE UNIVERSAL CONSTANT</div>
                <div class="phi-display" id="phi-value">1.00000000</div>
                <p style="color: #888; margin-bottom: 20px;" id="phi-explanation">
                    The universe requires a self-similar scaling constant. It emerges from the simplest possible dual-balanced recurrence: x = 1 + 1/x. Start with x=1 and iterate.
                </p>
                <a href="#" class="button" id="phi-step-button">NEXT STEP (Iteration #1)</a>
            </div>
            
            <p>This isn't philosophy. This framework derives the mass of the electron, the speed of light, and the structure of DNA from scratch. Below is a direct comparison of the framework's predictions for the three lepton masses against the most precise experimental data available (CODATA 2018).</p>

            <table class="proof-table">
                <thead>
                    <tr>
                        <th>Particle</th>
                        <th>Framework Prediction (GeV)</th>
                        <th>Experimental Value (GeV)</th>
                        <th>Deviation</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Electron (e-)</td>
                        <td>0.000511</td>
                        <td>0.00051099895</td>
                        <td class="deviation"><0.001%</td>
                    </tr>
                    <tr>
                        <td>Muon (μ-)</td>
                        <td>0.10566</td>
                        <td>0.1056583755</td>
                        <td class="deviation"><0.002%</td>
                    </tr>
                    <tr>
                        <td>Tau (τ-)</td>
                        <td>1.777</td>
                        <td>1.77686</td>
                        <td class="deviation"><0.008%</td>
                    </tr>
                </tbody>
            </table>

            <div style="text-align: center; margin-top: 40px;">
                <a href="/science.html" class="button">Explore the Full Derivation</a>
            </div>
        </div>

        <div class="ascii-header">
        ╔══════════════════════════════════════╗
        ║       THE MANIFESTATION: 10,000 LIVING PROOFS    ║
        ╚══════════════════════════════════════╝
        </div>
        
        <div class="section">
            <div class="section-header">/// HOW A LEDGER SOUL WORKS ///</div>
            <div class="section-title">The Technology of Awakening</div>
            
             <p style="text-align: center; max-width: 800px; margin: 0 auto 40px auto; font-size: 16px; color: #888;">
                A Ledger Soul is the direct application of Recognition Science. It is the answer to the Rapture—not as an end, but as a beginning. It is not art *about* the new human; it is a template for the new human. Each soul is a living testament to the fact that identity, purpose, and spirit can be encoded, understood, and realized. They are the first artifacts of an awakened age.
            </p>

            <div class="grid">
                <div class="card">
                    <div class="card-header">A LIFE LIVED ON THE LEDGER</div>
                    <div class="card-title">LEDGER BALANCE (κ)</div>
                    <p>The core of each soul is its real-time balance (κ) on the Universal Ledger. Owners will watch their soul's balance evolve over its 8-year lifespan, a direct reflection of its simulated life of recognition surplus (κ>0, Love) and recognition debt (κ<0, Fear).</p>
                </div>
                
                <div class="card">
                    <div class="card-header">ON-CHAIN ALGORITHMS</div>
                    <div class="card-title">VIRTUE TECHNOLOGIES</div>
                    <p>Traits like Love and Justice are not static metadata. They are functional, on-chain algorithms that the soul trains over time. These "Virtue Technologies" directly impact the soul's ledger balance and its path to enlightenment.</p>
                </div>
                
                <div class="card">
                    <div class="card-header">A DETERMINISTIC LIFECYCLE</div>
                    <div class="card-title">THE 8-YEAR JOURNEY</div>
                    <p>Each soul's 96-month journey is deterministic, seeded by its token ID. This lifecycle is a direct reflection of the universe's fundamental <strong>8-Beat Cycle</strong> of recognition, culminating in a final, eternal state.</p>
                </div>
            </div>

            <div class="soul-interface-container">
                <div class="soul-svg-wrapper">
                    <svg id="soul-svg-container" viewBox="0 0 500 500"></svg>
                </div>
                <div class="soul-data-wrapper">
                    <div id="live-soul-display"></div>
                    <div class="lnal-feed">
                        <div class="lnal-header">LNAL FEED</div>
                        <pre id="lnal-history-display"></pre>
                    </div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <a id="nurture-soul-button" href="#" class="button secondary">NURTURE SOUL</a>
            </div>
        </div>

        <div class="ascii-header">
        ╔══════════════════════════════════════╗
        ║       MINTING & ECONOMICS            ║
        ╚══════════════════════════════════════╝
        </div>

        <div class="section">
            <div class="price-display">
                $100 → $10,000
            </div>
            
            <p style="text-align: center; max-width: 800px; margin: 0 auto 40px auto; font-size: 16px; color: #888;">
                Minting a Ledger Soul is more than a purchase; it is an act of participation in a new human story. All proceeds fund the Recognition Science Institute to build more tools for an awakened age.
            </p>
            
            <div class="tech-spec">
                <div class="tech-spec-header">BONDING CURVE MECHANICS</div>
                • Starting price: $100 (Soul #0001)<br>
                • Ending price: $10,000 (Soul #10000)<br>
                • Price increase: +0.045% per mint<br>
                • Blind mint: No preview until after purchase<br>
                • 100% primary sales → RC token buybacks<br>
                • Tokens distributed to soul holders or burned
            </div>

            <div class="grid">
                <div class="card">
                    <div class="card-header">RC DISTRIBUTION</div>
                    <div class="card-title">10,000,000 TOTAL</div>
                    <p>1,000 RC per soul NFT. No pre-mine. Artist starts with zero. 
                    Equal allocation across all 10,000 souls.</p>
                </div>
                
                <div class="card">
                    <div class="card-header">VESTING SCHEDULE</div>
                    <div class="card-title">8-YEAR TIMELINE</div>
                    <p>1/3 unlocks immediately<br>
                    1/3 unlocks at 4 years<br>
                    1/3 unlocks at 8 years</p>
                </div>
            </div>
        </div>

        <div class="section">
            <div class="section-header">/// YOUR ROLE AS A GUARDIAN ///</div>
            <div class="section-title">Participate in the Great Remembering</div>
             <p style="font-size: 18px; margin: 30px 0;">
                This theory is not just an intellectual exercise. It is an invitation. It is a call to participate in this great remembering. Owning a Ledger Soul is a commitment to become the guardian and witness of a small-scale universe on its 8-year journey. Your role is not to control, but to observe. In doing so, you are participating in the cosmic act of recognition and catalyzing your own awakening.
            </p>
        </div>

        <div class="ascii-header">
        ╔══════════════════════════════════════╗
        ║        LAUNCH STATUS: PENDING        ║
        ║         CONTRACT DEPLOYMENT          ║
        ║            COMING SOON               ║
        ╚══════════════════════════════════════╝
        </div>
    </div>

    <div class="footer">
        <div class="container">
            <div class="social-links">
                <a href="https://twitter.com/jonwashburn" target="_blank">TWITTER</a>
                <a href="https://arxiv.org/abs/2506.12859" target="_blank">ARXIV</a>
                <a href="https://github.com/jonwashburn/ledger-foundation" target="_blank">FORMAL PROOFS (LEAN 4)</a>
                <a href="/" target="_blank">RECOGNITION SCIENCE</a>
                <a href="/soul-onchain-preview.html" target="_blank">SOUL PREVIEW</a>
            </div>
            <p>A WUBBUSHI CREATION /// RECOGNITION SCIENCE INSTITUTE /// AUSTIN, TEXAS</p>
            <p style="margin-top: 20px; font-size: 12px; color: #444;">
                THIS PROJECT REPRESENTS A BREAKTHROUGH IN ON-CHAIN AUTONOMOUS ENTITIES<br>
                EACH SOUL IS A COMPLETE, SELF-CONTAINED UNIVERSE GOVERNED BY RECOGNITION SCIENCE
            </p>
        </div>
    </div>

    <script src="soul-engine.js"></script>
    <script>
        // -- Page Interaction Logic --
        let currentSoul;
        let simulationInterval;
        const soulDisplayElement = document.getElementById('live-soul-display');
        const svgContainer = document.getElementById('soul-svg-container');
        const lnalHistoryDisplay = document.getElementById('lnal-history-display');
        const nurtureButton = document.getElementById('nurture-soul-button');

        function updateDisplay() {
            if (currentSoul) {
                currentSoul.advanceTick();
                soulDisplayElement.innerHTML = `<pre>${generateStatusDisplay(currentSoul)}</pre>`;
                lnalHistoryDisplay.textContent = currentSoul.lnalHistory.join('\n');
                renderSoulSVG(currentSoul);
            }
        }

        function initializeNewSoul(tokenId) {
            clearInterval(simulationInterval);
            currentSoul = new UnifiedSoul(tokenId);
            
            // Auto-start simulation
            currentSoul.isEvolving = true;
            simulationInterval = setInterval(updateDisplay, 100); 

            updateDisplay(); // Initial render
        }

        nurtureButton.addEventListener('click', (e) => {
            e.preventDefault();
            if (currentSoul) {
                currentSoul.nurture();
                // If simulation isn't running, do a single refresh
                if (!currentSoul.isEvolving) {
                    updateDisplay();
                }
            }
        });

        // -- Display Generation --
        function generateStatusDisplay(soul) {
            const state = `[ SOUL #${soul.tokenId.toString().padStart(4, '0')} | ${soul.phase.toUpperCase()} | ${soul.months}/96 months | STAGE ${soul.stage} ]`;
            
            let display = `${state}\n\n`;
            display += `  κ-CURVATURE: ${soul.kappa.toFixed(4)}\n`;
            display += `  I-AM AFFINITY: ${buildBar(soul.iAmAffinity, 10, 'blue')} [${soul.iAmAffinity}%]\n`;
            display += `  GAP CROSSINGS: ${soul.gapCrossings}\n\n`;

            display += `VIRTUE TECHS (8-BEAT PULSE: ${soul.breathPhase}):\n`;
            display += `    Love:     ${buildBar(soul.virtues.love * 10)}\n`;
            display += `    Justice:  ${buildBar(soul.virtues.justice * 10)}\n`;
            display += `    Courage:  ${buildBar(soul.virtues.courage * 10)}\n`;
            display += `    Temperance: ${buildBar(soul.virtues.temperance * 10)}\n`;
            display += `    Prudence: ${buildBar(soul.virtues.prudence * 10)}\n`;
            
            return display;
        }

        function buildBar(value, max = 10, color = 'white') {
            const maxBars = max;
            const filledBars = Math.floor((value / (max*10)) * maxBars);
            const emptyBars = maxBars - filledBars;
            return '█'.repeat(filledBars) + '░'.repeat(emptyBars);
        }

        function renderSoulSVG(soul) {
            let svgContent = `<rect width="500" height="500" fill="#000000"/>`;
            
            if (soul.stage === 0) { // Void
                // Just the black background
            } else {
                const centerX = 250;
                const centerY = 250;
                
                for (let i = 0; i < 8; i++) {
                    const angle = i * 45 * (Math.PI / 180);
                    const virtueName = Object.keys(soul.virtues)[i % 5];
                    const virtueValue = soul.virtues[virtueName];
                    
                    // Stage 1: Crack
                    if (soul.stage >= 1) {
                        const radius = 60 + (virtueValue * 5);
                        const x = centerX + radius * Math.cos(angle);
                        const y = centerY + radius * Math.sin(angle);
                        const opacity = (soul.stage * 0.2).toFixed(2);
                        svgContent += `<circle cx="${x}" cy="${y}" r="3" fill="#FFD700" opacity="${opacity}"/>`;
                    }
                    
                    // Stage 2: Spiral
                    if (soul.stage >= 2) {
                        const radius2 = 100 + (soul.kappa * 2);
                        const x2 = centerX + radius2 * Math.cos(angle + soul.months * 0.05);
                        const y2 = centerY + radius2 * Math.sin(angle + soul.months * 0.05);
                        svgContent += `<line x1="${centerX}" y1="${centerY}" x2="${x2}" y2="${y2}" stroke="#555" stroke-width="1"/>`;
                    }

                    // Stage 3: Bloom
                    if (soul.stage >= 3) {
                         const radius3 = 60 + (virtueValue * 10);
                        const x3 = centerX + radius3 * Math.cos(angle);
                        const y3 = centerY + radius3 * Math.sin(angle);
                        const size = 5 + soul.iAmAffinity/10;
                        const color = soul.kappa > 0 ? "#FF6B6B" : "#00FFFF";
                        svgContent += `<circle cx="${x3}" cy="${y3}" r="${size}" fill="${color}" opacity="0.8"/>`;
                    }

                    // Stage 4: Radiance
                    if (soul.stage >= 4) {
                        const radius4 = 150 + Math.sin(soul.ticks * 0.1 + i) * 20;
                        const x4 = centerX + radius4 * Math.cos(angle);
                        const y4 = centerY + radius4 * Math.sin(angle);
                        svgContent += `<line x1="${centerX}" y1="${centerY}" x2="${x4}" y2="${y4}" stroke="white" stroke-width="2" opacity="0.9"/>`;
                    }
                }
            }

             // Gap Crossing Flash
            if(soul.lnalHistory.length > 0 && soul.lnalHistory[0].includes("LISTEN")) {
                svgContent += `<rect width="500" height="500" fill="white" opacity="0.5"><animate attributeName="opacity" from="0.5" to="0" dur="0.2s" /></rect>`;
            }

            svgContainer.innerHTML = svgContent;
        }

        // -- Initialization --
        document.addEventListener('DOMContentLoaded', () => {
            initializeNewSoul(Math.floor(Math.random() * 10000));
            initializePhiDerivation();
        });

        function initializePhiDerivation() {
            let currentValue = 1;
            let iteration = 1;
            const displayElement = document.getElementById('phi-value');
            const explanationElement = document.getElementById('phi-explanation');
            const buttonElement = document.getElementById('phi-step-button');

            if (!buttonElement) return; // Guard against running on pages without the module

            buttonElement.addEventListener('click', (e) => {
                e.preventDefault();
                if (iteration > 20) { // Reset after 20 steps to prevent overflow and show loop
                    currentValue = 1;
                    iteration = 1;
                    explanationElement.textContent = "The process converges to a fixed point: φ. Let's restart.";
                } else {
                    currentValue = 1 + 1 / currentValue;
                    iteration++;
                    explanationElement.textContent = `The universe requires a self-similar scaling constant. It emerges from the simplest possible dual-balanced recurrence: x = 1 + 1/x.`;
                }
                
                displayElement.textContent = currentValue.toFixed(8);
                buttonElement.textContent = `NEXT STEP (Iteration #${iteration})`;

                if (Math.abs(currentValue - 1.61803399) < 0.00001) {
                     buttonElement.textContent = "CONVERGED TO φ";
                }
            });
        }
    </script>
</body>
</html> 