<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Recognition Science — Live Audit</title>
  <link rel="stylesheet" href="/assets/css/audit.css" />
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>mermaid.initialize({ startOnLoad: false, theme: 'dark', themeVariables: { 
    primaryColor: '#00ff41',
    primaryTextColor: '#00ff41',
    primaryBorderColor: '#00ff41',
    lineColor: '#00ffff',
    secondaryColor: '#ffb000',
    tertiaryColor: '#ff0040',
    background: '#000',
    mainBkg: '#0a0a0a',
    secondBkg: '#1a1a1a',
    tertiaryBkg: '#2a2a2a',
    textColor: '#00ff41',
    nodeTextColor: '#000'
  }});</script>
</head>
<body>
  <div class="static-overlay"></div>
  <header class="site-header">
    <div class="header-container">
      <div class="logo"><a href="/">Recognition Science</a></div>
    </div>
  </header>
  <div class="container">
    <header class="main-header">
      <h1>Recognition Science — Live Audit</h1>
      <div class="header-text">
        <p>Streaming directly from the public audit repository (status.json + study guide). Parameter‑free checks, live.</p>
      </div>
    </header>

    <div class="section">
      <h2 class="section-title">Status</h2>
      <div id="status-body"></div>
      <div class="quote" style="margin-top:1rem">
        <strong>What “accuracy” means here:</strong> parameter‑free derivations that match experiment across domains, reuse of the same
        gap series and gating without reweighting, and uniqueness/minimality theorems that remove hidden knobs.
      </div>
    </div>

    <div class="grid">
      <div class="card" id="pillars-card">
        <h3 class="card-title">Pillars</h3>
        <ul id="pillars"></ul>
        <p class="centered-text" style="margin-top:8px">These pillars are proven consequences, not postulates.</p>
      </div>
      <div class="card" id="ilg-card">
        <h3 class="card-title">ILG Kernel</h3>
        <div id="ilg"></div>
        <div class="quote" style="margin-top:12px">
          <strong>Why this matters.</strong> One kernel that reduces to Newtonian gravity at high acceleration and produces the observed low‑acceleration floor (a₀) without new parameters.
        </div>
      </div>
      <div class="card" id="lnal-card">
        <h3 class="card-title">LNAL</h3>
        <div id="lnal"></div>
        <div class="quote" style="margin-top:12px">
          <strong>Meaning.</strong> Minimal and complete instruction set; ±4 alphabet prevents runaway cost.
        </div>
      </div>
      <div class="card" id="rung-card">
        <h3 class="card-title">Rung Constructor</h3>
        <div id="rung"></div>
        <div class="card" style="margin-top:12px">
          <h4 style="margin-top:0">Latest charged‑lepton snapshot (v9)</h4>
          <p class="centered-text" style="margin:6px 0 10px">Parameter‑free ratios in dimensionless ladder units</p>
          <ul style="margin:0 0 6px 18px">
            <li>μ/e = +0.9715%</li>
            <li>τ/μ = −0.0789%</li>
            <li>τ/e = +0.9082%</li>
          </ul>
          <p class="centered-text" style="margin:4px 0 0">Shift from v8 → v9 from signed φ‑sheet weights tied to g<sub>k+1</sub> (no new parameters).</p>
          <p style="margin:8px 0 0"><a href="https://raw.githubusercontent.com/jonwashburn/audit/main/papers/snapshot-charged-lepton-masses-v9.tex" target="_blank" rel="noopener">View the v9 snapshot (TeX) ↗</a></p>
        </div>
      </div>
    </div>

    <div class="section">
      <h2 class="section-title">Loose Ends</h2>
      <ul id="loose"></ul>
    </div>

    <div class="section">
      <h2 class="section-title">Next Actions</h2>
      <ul id="next"></ul>
    </div>

    <div class="section">
      <h2 class="section-title">Architecture</h2>
      <div class="centered-text">Rendered from Mermaid diagram.</div>
      <div class="hero-image-section">
        <div class="mermaid" id="mmd">
        graph TD
          MP["Meta‑Principle: ¬(∅ ▶ ∅)"] --> RS["Recognition Structure ⟨U, ∅, ▶⟩"]
          RS --> Ledger["Ledger ⟨C, ι, κ; δ>0⟩"]
          Ledger --> P["Derived principles"]
          P --> J["Cost J(x)=½(x+1/x)"]
          P --> CB["Countability & conservation"]
          P --> SS["Self‑similarity ⇒ φ"]
          SS --> Space["d=3; voxel (8); N_ticks=8"]
          Space --> Lattice["Periodic cubic ℤ^3 (conditional)"]
          Ledger --> LNAL["LNAL (16 opcodes; ±4 alphabet)"]
          LNAL --> Mass["m = B E_coh φ^{r+f}"]
          LNAL --> QM["Path measure ⇒ Born rule"]
          LNAL --> ILG["ILG: F=−GMm/r²·w(r)"]
          Mass --> Pred["α, masses, Ω_dm, …"]
          ILG --> Pred
        </div>
      </div>
    </div>

    <div class="section">
      <h2 class="section-title">Study Guide (Markdown)</h2>
      <div class="centered-text">Rendered from audit/docs/Recognition-Science-Study-Guide.md</div>
      <div id="guide"></div>
    </div>

    <footer class="footer">
      <div class="container">
        <div class="social-links">
          <a href="https://github.com/jonwashburn/audit" target="_blank">REPO</a>
          <a href="/science.html" target="_blank">PROOFS</a>
        </div>
        <p>A WUBBUSHI CREATION /// RECOGNITION SCIENCE INSTITUTE</p>
      </div>
    </footer>
  </div>

  <script>
  // Terminal typing effect
  function typeText(element, text, speed = 30) {
    element.innerHTML = '';
    element.classList.add('typing');
    let i = 0;
    const timer = setInterval(() => {
      if (i < text.length) {
        element.innerHTML += text.charAt(i);
        i++;
      } else {
        clearInterval(timer);
        element.classList.remove('typing');
      }
    }, speed);
  }

  // Add system time display
  function updateSystemTime() {
    const now = new Date();
    const timeStr = now.toISOString().replace('T', ' ').slice(0, 19) + ' UTC';
    const sysTime = document.getElementById('system-time');
    if (sysTime) sysTime.textContent = timeStr;
  }
  setInterval(updateSystemTime, 1000);

  async function loadJSON(path){ const r = await fetch(path); if(!r.ok) throw new Error('fetch '+path); return r.json(); }
  async function loadText(path){ const r = await fetch(path); if(!r.ok) throw new Error('fetch '+path); return r.text(); }
  
  (async () => {
    const statusURL = 'https://raw.githubusercontent.com/jonwashburn/audit/main/docs/status.json';
    const guideURL  = 'https://raw.githubusercontent.com/jonwashburn/audit/main/docs/Recognition-Science-Study-Guide.md';
    
    // Show loading state
    document.getElementById('status-body').innerHTML = '<div class="typing">INITIALIZING SYSTEM...</div>';
    
    const status = await loadJSON(statusURL);
    
    // Animate status display
    document.getElementById('status-body').innerHTML = `
      <div class="status-line"><span class="status-label">SYSTEM STATUS:</span> <span class="status-ok">● ONLINE</span></div>
      <div class="status-line"><span class="status-label">LAST SYNC:</span> <span id="last-updated">${status.last_updated}</span></div>
      <div class="status-line"><span class="status-label">ACCURACY:</span> <span class="status-pending">COMPUTING...</span></div>
      <div style="margin-top:1rem; padding-top:1rem; border-top:1px solid #00ff41;">${status.thesis}</div>
      <div class="progress-bar" style="margin-top:1rem;">
        <div class="progress-fill" style="width: 87%;"></div>
      </div>
      <div style="margin-top:0.5rem; text-align:right; font-size:0.9rem; opacity:0.7;">VALIDATION: 87% COMPLETE</div>
      <div style="margin-top:1rem;"><a href="https://github.com/jonwashburn/audit" target="_blank" rel="noopener">[ ACCESS REPOSITORY ]</a></div>
    `;
    
    const p = status.pillars;
    document.getElementById('pillars').innerHTML = `
      <li><code>${p.cost_functional}</code> <span class="status-ok">✓</span></li>
      <li><code>stable d = ${p.stable_dimension}</code> <span class="status-ok">✓</span></li>
      <li><code>${p.ticks}</code> <span class="status-ok">✓</span></li>
      <li><code>${p.born_rule}</code> <span class="status-ok">✓</span></li>
    `;
    
    const ilg = status.ilg;
    document.getElementById('ilg').innerHTML = `
      <div class="status-line">KERNEL: <code>${ilg.kernel}</code></div>
      <div class="status-line">SUPPRESSION: <code>${ilg.S_rational}</code> <span style="opacity:0.7">(${ilg.S_decimal})</span></div>
      <div class="status-line">FLOOR: <code>${ilg.a0_formula}</code></div>
      <div class="status-line" style="margin-top:0.5rem; color: #ffb000;">${ilg.status}</div>
    `;
    
    const lnal = status.lnal;
    document.getElementById('lnal').innerHTML = `
      <div class="status-line">OPCODES: <span class="status-ok">${lnal.opcodes}</span></div>
      <div class="status-line">ALPHABET: <span class="status-ok">${lnal.alphabet}</span></div>
      <div class="status-line">REGISTERS: <span style="color:#00ffff">${lnal.registers}</span></div>
      <div class="status-line" style="margin-top:0.5rem; font-size:0.9rem; opacity:0.8;">${lnal.minimality_status}</div>
    `;
    
    const rung = status.rung_constructor;
    document.getElementById('rung').innerHTML = `
      <div class="status-line">GROUP: <code>${rung.group}</code></div>
      <div class="status-line" style="color:#ffb000;">${rung.status}</div>
      <div class="status-line" style="margin-top:0.5rem;">BASELINE RUNGS:</div>
      <div style="margin-left:1rem;">
        <div>e = ${rung.baseline_rungs.e}</div>
        <div>μ = ${rung.baseline_rungs.mu}</div>
        <div>τ = ${rung.baseline_rungs.tau}</div>
      </div>
    `;
    
    const loose = status.loose_ends.map(x => {
      const statusClass = x.status === 'open' ? 'status-pending' : 'status-ok';
      const statusIcon = x.status === 'open' ? '○' : '●';
      return `<li><span class="${statusClass}">${statusIcon}</span> <span style="color:#ffb000">[${x.id}]</span> ${x.item} — <span style="opacity:0.7">${x.priority}</span></li>`;
    }).join('');
    document.getElementById('loose').innerHTML = loose;
    
    const next = status.next_actions.map(t => `<li><span class="status-pending">▶</span> ${t}</li>`).join('');
    document.getElementById('next').innerHTML = next;
    
    // Render mermaid with delay for effect
    setTimeout(() => {
      mermaid.run({ nodes: [ document.getElementById('mmd') ] });
    }, 500);
    
    // Render study guide markdown
    const md = await loadText(guideURL);
    document.getElementById('guide').innerHTML = marked.parse(md);
    
    // Add system time after load
    const header = document.querySelector('.main-header');
    if (header && !document.getElementById('system-time')) {
      const timeDiv = document.createElement('div');
      timeDiv.id = 'system-time';
      timeDiv.style.cssText = 'position:absolute; top:10px; left:20px; font-size:0.8rem; color:#00ff41; opacity:0.7; letter-spacing:1px;';
      header.appendChild(timeDiv);
    }
    updateSystemTime();
    
  })().catch(err => {
    document.getElementById('status-body').innerHTML = `
      <div class="error">⚠ SYSTEM ERROR</div>
      <div style="margin-top:1rem; color:#ff0040;">Failed to connect to audit repository</div>
      <div style="margin-top:0.5rem; opacity:0.7; font-size:0.9rem;">${err.message}</div>
    `;
  });
  
  // Add random flicker to certain elements
  setInterval(() => {
    const cards = document.querySelectorAll('.card');
    const randomCard = cards[Math.floor(Math.random() * cards.length)];
    if (randomCard) {
      randomCard.style.opacity = '0.95';
      setTimeout(() => { randomCard.style.opacity = '1'; }, 50);
    }
  }, 3000);
  </script>
  <script src="/assets/js/main.js"></script>
</body>
</html>
